import{S as te,i as le,s as se,e as m,t as H,a as T,d as h,u as ie,f as F,g as n,h as z,l as S,k as P,C as $,j,D as ne,o as ae,B as x,p as ee,r as B,q as O,y as oe,c as re,m as ce,n as ue,v as A,z as fe}from"./index.534f2e7f.js";import{h as G,M as he}from"./MintTable.a63c07ed.js";function J(l,e,t){const i=l.slice();return i[28]=e[t],i}function V(l){let e,t,i,o,a,r,v,s,d,y,_,b,p,M,c;return{c(){e=m("div"),t=m("h2"),i=H(l[9]),o=H(" ("),a=H(l[10]),r=H(")"),v=T(),s=m("a"),d=m("img"),_=T(),b=H(l[3]),M=T(),c=m("div"),c.textContent="Mint your NFT from an invite list below.",h(t,"class","svelte-uyle1h"),ie(d.src,y="/etherscan.png")||h(d,"src",y),h(d,"class","svelte-uyle1h"),h(s,"target","_blank"),h(s,"href",p="https://"+l[12]+"etherscan.io/address/"+l[3]+"#code"),h(s,"class","svelte-uyle1h"),h(c,"class","annotation svelte-uyle1h"),h(e,"class","ns svelte-uyle1h")},m(u,k){F(u,e,k),n(e,t),n(t,i),n(t,o),n(t,a),n(t,r),n(e,v),n(e,s),n(s,d),n(s,_),n(s,b),n(e,M),n(e,c)},p(u,k){k&512&&z(i,u[9]),k&1024&&z(a,u[10]),k&8&&z(b,u[3]),k&4104&&p!==(p="https://"+u[12]+"etherscan.io/address/"+u[3]+"#code")&&h(s,"href",p)},d(u){u&&S(e)}}}function me(l){let e;return{c(){e=m("div"),e.textContent="you are not on any invite list",h(e,"class","empty")},m(t,i){F(t,e,i)},p:B,i:B,o:B,d(t){t&&S(e)}}}function de(l){let e,t,i,o=l[0],a=[];for(let r=0;r<o.length;r+=1)a[r]=X(J(l,o,r));return{c(){e=m("table"),t=m("tr"),t.innerHTML=`<th class="svelte-uyle1h">name</th> 
          <th class="svelte-uyle1h">price</th> 
          <th class="invite-limit svelte-uyle1h">limit</th> 
          <th class="invite-mint svelte-uyle1h">mint</th>`,i=T();for(let r=0;r<a.length;r+=1)a[r].c();h(e,"class","svelte-uyle1h")},m(r,v){F(r,e,v),n(e,t),n(e,i);for(let s=0;s<a.length;s+=1)a[s].m(e,null)},p(r,v){if(v&16385){o=r[0];let s;for(s=0;s<o.length;s+=1){const d=J(r,o,s);a[s]?a[s].p(d,v):(a[s]=X(d),a[s].c(),a[s].m(e,null))}for(;s<a.length;s+=1)a[s].d(1);a.length=o.length}},i:B,o:B,d(r){r&&S(e),oe(a,r)}}}function _e(l){let e;return{c(){e=m("div"),e.innerHTML='<i class="fa-solid fa-circle-notch fa-spin"></i><br/>loading invites...',h(e,"class","loading svelte-uyle1h")},m(t,i){F(t,e,i)},p:B,i:B,o:B,d(t){t&&S(e)}}}function ve(l){let e,t,i,o,a=(l[4].name?l[4].name:l[4].key)+"",r,v,s,d,y,_,b,p,M,c,u,k,N,q,C,I,E,D,Q,U;function W(f,g){return f[6]?ye:pe}let K=W(l),L=K(l),w=l[8]&&Y(l);return{c(){e=m("div"),t=m("div"),i=m("div"),o=m("div"),r=H(a),v=T(),s=m("div"),d=T(),y=m("button"),y.innerHTML='<i class="fa-solid fa-circle-xmark"></i>',_=T(),b=m("h2"),p=H(l[11]),M=H(" ETH"),c=T(),u=m("div"),k=m("div"),k.textContent="count",N=T(),q=m("div"),C=m("input"),I=T(),L.c(),E=T(),w&&w.c(),h(i,"class","invitename svelte-uyle1h"),h(s,"class","flexible svelte-uyle1h"),h(y,"class","svelte-uyle1h"),h(t,"class","header svelte-uyle1h"),h(b,"class","svelte-uyle1h"),h(k,"class","name svelte-uyle1h"),h(C,"type","number"),h(C,"placeholder","mint count"),h(C,"class","svelte-uyle1h"),h(q,"class","value svelte-uyle1h"),h(u,"class","selector svelte-uyle1h"),h(e,"class","showauth info svelte-uyle1h")},m(f,g){F(f,e,g),n(e,t),n(t,i),n(i,o),n(o,r),n(t,v),n(t,s),n(t,d),n(t,y),n(e,_),n(e,b),n(b,p),n(b,M),n(e,c),n(e,u),n(u,k),n(u,N),n(u,q),n(q,C),A(C,l[1]),n(e,I),L.m(e,null),n(e,E),w&&w.m(e,null),D=!0,Q||(U=[O(y,"click",l[17]),O(C,"input",l[18]),O(C,"input",l[19])],Q=!0)},p(f,g){(!D||g&16)&&a!==(a=(f[4].name?f[4].name:f[4].key)+"")&&z(r,a),(!D||g&2048)&&z(p,f[11]),g&2&&ee(C.value)!==f[1]&&A(C,f[1]),K===(K=W(f))&&L?L.p(f,g):(L.d(1),L=K(f),L&&(L.c(),L.m(e,E))),f[8]?w?(w.p(f,g),g&256&&j(w,1)):(w=Y(f),w.c(),j(w,1),w.m(e,null)):w&&(x(),P(w,1,1,()=>{w=null}),$())},i(f){D||(j(w),D=!0)},o(f){P(w),D=!1},d(f){f&&S(e),L.d(),w&&w.d(),Q=!1,fe(U)}}}function X(l){let e,t,i=(l[28].name?l[28].name:l[28].key)+"",o,a,r,v=l[28].price+"",s,d,y,_,b=l[28].limit+"",p,M,c,u,k,N,q;function C(){return l[21](l[28])}return{c(){e=m("tr"),t=m("td"),o=H(i),a=T(),r=m("td"),s=H(v),d=H(" ETH"),y=T(),_=m("td"),p=H(b),M=T(),c=m("td"),u=m("button"),u.textContent="mint",k=T(),h(t,"class","svelte-uyle1h"),h(r,"class","svelte-uyle1h"),h(_,"class","invite-limit svelte-uyle1h"),h(u,"class","display svelte-uyle1h"),h(c,"class","invite-mint svelte-uyle1h")},m(I,E){F(I,e,E),n(e,t),n(t,o),n(e,a),n(e,r),n(r,s),n(r,d),n(e,y),n(e,_),n(_,p),n(e,M),n(e,c),n(c,u),n(e,k),N||(q=O(u,"click",C),N=!0)},p(I,E){l=I,E&1&&i!==(i=(l[28].name?l[28].name:l[28].key)+"")&&z(o,i),E&1&&v!==(v=l[28].price+"")&&z(s,v),E&1&&b!==(b=l[28].limit+"")&&z(p,b)},d(I){I&&S(e),N=!1,q()}}}function pe(l){let e,t,i;return{c(){e=m("button"),e.textContent="mint",h(e,"id","mint-button"),h(e,"class","display svelte-uyle1h")},m(o,a){F(o,e,a),t||(i=O(e,"click",l[20]),t=!0)},p:B,d(o){o&&S(e),t=!1,i()}}}function ye(l){let e;return{c(){e=m("div"),e.innerHTML='<i class="fa-solid fa-circle-notch fa-spin"></i><br/>minting NFTs...',h(e,"class","loading svelte-uyle1h")},m(t,i){F(t,e,i)},p:B,d(t){t&&S(e)}}}function Y(l){let e,t;return e=new he({props:{tx:l[8],web3:l[13],contract:l[3]}}),{c(){re(e.$$.fragment)},m(i,o){ce(e,i,o),t=!0},p(i,o){const a={};o&256&&(a.tx=i[8]),o&8&&(a.contract=i[3]),e.$set(a)},i(i){t||(j(e.$$.fragment,i),t=!0)},o(i){P(e.$$.fragment,i),t=!1},d(i){ue(e,i)}}}function be(l){let e,t,i,o,a,r,v,s,d,y,_=l[9]&&V(l);const b=[ve,_e,de,me],p=[];function M(c,u){return c[5]?0:c[7]?1:c[0]&&c[0].length>0?2:3}return s=M(l),d=p[s]=b[s](l),{c(){e=m("div"),t=H(l[2]),i=T(),o=m("div"),a=m("nav"),a.innerHTML=`<h1 class="svelte-uyle1h"><a href="/" class="svelte-uyle1h">factoria</a></h1> 
  <div>decentralized NFT vending machine maker</div> 
  <div class="buttons svelte-uyle1h"><a href="https://factoria.app/docs" class="svelte-uyle1h"><i class="fa-solid fa-circle-question"></i></a> 
    <a href="https://github.com/factoria-org/openfactoria" class="svelte-uyle1h"><i class="fa-brands fa-github"></i></a> 
    <a href="https://twitter.com/skogard" class="svelte-uyle1h"><i class="fa-brands fa-twitter"></i></a> 
    <a href="https://discord.gg/BZtp5F6QQM" class="svelte-uyle1h"><i class="fa-brands fa-discord"></i></a></div>`,r=T(),_&&_.c(),v=T(),d.c(),h(e,"class","error"),h(a,"class","svelte-uyle1h"),h(o,"class","container svelte-uyle1h")},m(c,u){F(c,e,u),n(e,t),F(c,i,u),F(c,o,u),n(o,a),n(o,r),_&&_.m(o,null),n(o,v),p[s].m(o,null),y=!0},p(c,[u]){(!y||u&4)&&z(t,c[2]),c[9]?_?_.p(c,u):(_=V(c),_.c(),_.m(o,v)):_&&(_.d(1),_=null);let k=s;s=M(c),s===k?p[s].p(c,u):(x(),P(p[k],1,1,()=>{p[k]=null}),$(),d=p[s],d?d.p(c,u):(d=p[s]=b[s](c),d.c()),j(d,1),d.m(o,null))},i(c){y||(j(d),y=!0)},o(c){P(d),y=!1},d(c){c&&S(e),c&&S(i),c&&S(o),_&&_.d(),p[s].d()}}}function ke(l,e,t){ne();let i={},o=[];const a=new F0;let r=1,v="",s,d,y,_,b,p,M,c,u=0,k,N,q,C,I=new Web3(window.ethereum);const E=async f=>{t(4,y=f),t(5,_=!0),location.hash="#"+s+":"+y.key,await D()},D=async()=>{let f=y;console.log("*",f),b={key:f.key,proof:a._invites[f.key].proof},u=""+a._invites[f.key].condition.raw.price*r,t(11,q=u/10**18);try{t(2,v="");let g=await a.api.mint(b,r).estimate({value:u});console.log("estimate",g)}catch(g){console.log("error",g.message),t(2,v=G(g.message))}},Q=async()=>{try{t(6,p=!0),t(2,v="");let f=y;b={key:f.key,proof:a._invites[f.key].proof},t(8,c=await a.api.mint(b,r).send({value:u}))}catch(f){t(2,v=G(f.message))}t(6,p=!1)},U=()=>{location.hash="#"+s,t(5,_=!1)};ae(async()=>{if(t(7,M=!0),location.hash.length>0){let R=location.hash.slice(1).split(":");t(3,s=R[0]),R.length>1&&(d=R[1])}else{t(2,v="[ERROR] no contract address specified");return}await a.init({web3:I,contract:s});let f=await I.eth.getChainId();t(12,C=f.toString()==="4"?"rinkeby.":""),t(9,k=await a.api.name().call()),t(10,N=await a.api.symbol().call()),i=await a.myInvites(),i&&i[d]&&await E(i[d]),t(0,o=[]);for(let g in i){let R=i[g].condition,Z=new Date(R.converted.start);R.converted.limit>0&&o.push({name:i[g].name,key:g,cid:i[g].cid,limit:`${R.converted.limit}`,price:`${R.converted.eth}`,start:`${Z.toDateString()} ${Z.toLocaleTimeString()}`,startUnix:R.raw.start})}t(7,M=!1)});function W(){r=ee(this.value),t(1,r)}return[o,r,v,s,y,_,p,M,c,k,N,q,C,I,E,D,Q,U,W,()=>{D()},()=>{Q()},f=>{E(f)}]}class ge extends te{constructor(e){super(),le(this,e,ke,be,se,{})}}new ge({target:document.getElementById("mint")});
