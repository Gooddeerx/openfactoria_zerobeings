import{S as je,i as Je,s as Ve,e as c,d as s,f as z,l as C,a as b,g as i,v as A,q as D,t as K,h as oe,p as rt,j as pe,c as Fe,m as De,k as ye,n as Ee,B as Xe,C as Ye,z as Te,A as at,w as Be,x as Ae,y as ct,D as Ze,o as Kt,r as he,b as Ke,E as Ut,u as yt,F as Ge}from"./index.534f2e7f.js";import{N as qt}from"./Nav.6c89479b.js";import{NFTStorage as Gt}from"https://cdn.jsdelivr.net/npm/nft.storage/dist/bundle.esm.min.js";import{g as jt,r as Jt}from"./db.6824b741.js";import{M as Bt,h as Qe}from"./MintTable.a63c07ed.js";import{f as At,r as Vt,u as Qt}from"./factory.213443f6.js";import"https://esm.run/localforage";let Xt=async(l,e)=>{let n=await jt("api_key").getItem("key");n||(alert("NFT.STORAGE api key needed. Go to the config page and set it first"),location.href="/config/");let a=n;const r=new Gt({token:a});let o={addresses:l};e&&(o.name=e);const f=JSON.stringify(o),m=new TextEncoder().encode(f),u=new Blob([m],{type:"application/json;charset=utf-8"});return await r.storeBlob(u)};function wt(l,e,t){const n=l.slice();return n[7]=e[t],n}function Yt(l){let e,t,n,a,r;return{c(){e=c("input"),t=b(),n=c("textarea"),e.disabled=!0,s(e,"type","text"),s(e,"placeholder","the name the invite list"),s(e,"class","svelte-1p9ambz"),n.disabled=!0,s(n,"placeholder","line separated address list"),s(n,"class","svelte-1p9ambz")},m(o,f){z(o,e,f),A(e,l[22]),z(o,t,f),z(o,n,f),A(n,l[8]),a||(r=[D(e,"input",l[37]),D(n,"input",l[38])],a=!0)},p(o,f){f[0]&4194304&&e.value!==o[22]&&A(e,o[22]),f[0]&256&&A(n,o[8])},d(o){o&&C(e),o&&C(t),o&&C(n),a=!1,Te(r)}}}function Zt(l){let e,t,n,a,r;return{c(){e=c("input"),t=b(),n=c("textarea"),s(e,"type","text"),s(e,"placeholder","the name of the invite list"),s(e,"class","svelte-1p9ambz"),s(n,"placeholder","line separated address list"),s(n,"class","svelte-1p9ambz")},m(o,f){z(o,e,f),A(e,l[22]),z(o,t,f),z(o,n,f),A(n,l[8]),a||(r=[D(e,"input",l[35]),D(n,"input",l[36])],a=!0)},p(o,f){f[0]&4194304&&e.value!==o[22]&&A(e,o[22]),f[0]&256&&A(n,o[8])},d(o){o&&C(e),o&&C(t),o&&C(n),a=!1,Te(r)}}}function gt(l){let e;return{c(){e=c("div"),e.innerHTML='<i class="fa-solid fa-circle-notch fa-spin"></i><br/>saving invites to IPFS...',s(e,"class","loading svelte-1p9ambz")},m(t,n){z(t,e,n)},d(t){t&&C(e)}}}function zt(l){let e;return{c(){e=c("input"),s(e,"type","submit"),e.value="Upload the list to IPFS",s(e,"class","svelte-1p9ambz")},m(t,n){z(t,e,n)},d(t){t&&C(e)}}}function xt(l){let e;return{c(){e=c("div"),e.textContent="The merkle root of the invite list",s(e,"class","annotation svelte-1p9ambz")},m(t,n){z(t,e,n)},d(t){t&&C(e)}}}function $t(l){let e;return{c(){e=c("div"),e.textContent="0x0 => public invite key",s(e,"class","annotation svelte-1p9ambz")},m(t,n){z(t,e,n)},d(t){t&&C(e)}}}function Ct(l){let e,t,n,a,r,o,f;return{c(){e=c("div"),t=c("div"),t.textContent="IPFS cid",n=b(),a=c("div"),r=c("input"),s(t,"class","name svelte-1p9ambz"),r.disabled=!0,s(r,"type","text"),s(r,"class","svelte-1p9ambz"),s(a,"class","val svelte-1p9ambz"),s(e,"class","item svelte-1p9ambz")},m(m,u){z(m,e,u),i(e,t),i(e,n),i(e,a),i(a,r),A(r,l[14]),o||(f=D(r,"input",l[40]),o=!0)},p(m,u){u[0]&16384&&r.value!==m[14]&&A(r,m[14])},d(m){m&&C(e),o=!1,f()}}}function el(l){let e;return{c(){e=c("div"),e.innerHTML='<input type="submit" value="Publish to the blockchain" class="svelte-1p9ambz"/>',s(e,"class","name svelte-1p9ambz")},m(t,n){z(t,e,n)},d(t){t&&C(e)}}}function tl(l){let e;return{c(){e=c("div"),e.innerHTML='<i class="fa-solid fa-circle-notch fa-spin"></i><br/>publishing the invite to the blockchain...',s(e,"class","loading svelte-1p9ambz")},m(t,n){z(t,e,n)},d(t){t&&C(e)}}}function It(l){let e,t,n,a,r,o=l[6].key+"",f,m,u,p,d,_,v,h,y,w,k,N,E,L,I,F,S,P,J,V,M,Y,se,W,G,Z,x,ee,ce,U,ie,q,me,re,ve,Q,T,$,ae,ue,j;function X(g,B){return g[16]?il:ll}let fe=X(l),ne=fe(l),H=l[15]&&Tt(l);return{c(){e=c("div"),t=c("div"),n=c("h3"),a=K("Invite Key"),r=c("br"),f=K(o),m=b(),u=c("div"),p=K("Mint directly from this page, or mint on\xA0"),d=c("a"),_=K("Etherscan"),h=b(),y=c("div"),w=c("div"),w.textContent="share this invite",k=b(),N=c("input"),E=b(),L=c("div"),I=c("div"),I.textContent="mint (payableAmount)",F=b(),S=c("div"),P=c("pre"),J=K(l[20]),V=b(),M=c("div"),Y=c("div"),Y.textContent="auth (tuple)",se=b(),W=c("div"),G=c("pre"),Z=K(l[19]),x=b(),ee=c("div"),ce=c("div"),ce.textContent="_count (mint count)",U=b(),ie=c("div"),q=c("input"),me=b(),re=c("div"),ve=c("div"),ve.textContent="mint",Q=b(),T=c("div"),ne.c(),$=b(),H&&H.c(),s(n,"class","svelte-1p9ambz"),s(d,"href",v="https://"+l[2]+"etherscan.io/address/"+l[0]+"#writeContract"),s(d,"target","_blank"),s(d,"class","svelte-1p9ambz"),s(u,"class","annotation svelte-1p9ambz"),s(w,"class","svelte-1p9ambz"),s(N,"type","text"),N.readOnly=!0,s(N,"class","svelte-1p9ambz"),s(y,"class","share svelte-1p9ambz"),s(t,"class","head svelte-1p9ambz"),s(I,"class","name svelte-1p9ambz"),s(S,"class","val svelte-1p9ambz"),s(L,"class","item svelte-1p9ambz"),s(Y,"class","name svelte-1p9ambz"),s(W,"class","val svelte-1p9ambz"),s(M,"class","item svelte-1p9ambz"),s(ce,"class","name svelte-1p9ambz"),s(q,"type","number"),s(q,"placeholder","mint count"),s(q,"class","svelte-1p9ambz"),s(ie,"class","val svelte-1p9ambz"),s(ee,"class","item svelte-1p9ambz"),s(ve,"class","name svelte-1p9ambz"),s(T,"class","val svelte-1p9ambz"),s(re,"class","item svelte-1p9ambz"),s(e,"class","showauth info svelte-1p9ambz")},m(g,B){z(g,e,B),i(e,t),i(t,n),i(n,a),i(n,r),i(n,f),i(t,m),i(t,u),i(u,p),i(u,d),i(d,_),i(t,h),i(t,y),i(y,w),i(y,k),i(y,N),A(N,l[23]),i(e,E),i(e,L),i(L,I),i(L,F),i(L,S),i(S,P),i(P,J),i(e,V),i(e,M),i(M,Y),i(M,se),i(M,W),i(W,G),i(G,Z),i(e,x),i(e,ee),i(ee,ce),i(ee,U),i(ee,ie),i(ie,q),A(q,l[17]),i(e,me),i(e,re),i(re,ve),i(re,Q),i(re,T),ne.m(T,null),i(e,$),H&&H.m(e,null),ae=!0,ue||(j=[D(N,"input",l[45]),D(q,"input",l[46]),D(q,"input",l[47])],ue=!0)},p(g,B){(!ae||B[0]&64)&&o!==(o=g[6].key+"")&&oe(f,o),(!ae||B[0]&5&&v!==(v="https://"+g[2]+"etherscan.io/address/"+g[0]+"#writeContract"))&&s(d,"href",v),B[0]&8388608&&N.value!==g[23]&&A(N,g[23]),(!ae||B[0]&1048576)&&oe(J,g[20]),(!ae||B[0]&524288)&&oe(Z,g[19]),B[0]&131072&&rt(q.value)!==g[17]&&A(q,g[17]),fe===(fe=X(g))&&ne?ne.p(g,B):(ne.d(1),ne=fe(g),ne&&(ne.c(),ne.m(T,null))),g[15]?H?(H.p(g,B),B[0]&32768&&pe(H,1)):(H=Tt(g),H.c(),pe(H,1),H.m(e,null)):H&&(Xe(),ye(H,1,1,()=>{H=null}),Ye())},i(g){ae||(pe(H),ae=!0)},o(g){ye(H),ae=!1},d(g){g&&C(e),ne.d(),H&&H.d(),ue=!1,Te(j)}}}function ll(l){let e,t,n;return{c(){e=c("button"),e.textContent="mint",s(e,"class","display svelte-1p9ambz")},m(a,r){z(a,e,r),t||(n=D(e,"click",l[48]),t=!0)},p:he,d(a){a&&C(e),t=!1,n()}}}function il(l){let e;return{c(){e=c("div"),e.innerHTML='<i class="fa-solid fa-circle-notch fa-spin"></i><br/>minting NFTs...',s(e,"class","loading svelte-1p9ambz")},m(t,n){z(t,e,n)},p:he,d(t){t&&C(e)}}}function Tt(l){let e,t;return e=new Bt({props:{tx:l[15],web3:l[1],contract:l[0]}}),{c(){Fe(e.$$.fragment)},m(n,a){De(e,n,a),t=!0},p(n,a){const r={};a[0]&32768&&(r.tx=n[15]),a[0]&2&&(r.web3=n[1]),a[0]&1&&(r.contract=n[0]),e.$set(r)},i(n){t||(pe(e.$$.fragment,n),t=!0)},o(n){ye(e.$$.fragment,n),t=!1},d(n){Ee(e,n)}}}function Nt(l){let e;return{c(){e=c("th"),e.textContent="edit invite",s(e,"class","invite-edit svelte-1p9ambz")},m(t,n){z(t,e,n)},d(t){t&&C(e)}}}function nl(l){let e,t,n=l[7].cid+"",a,r;return{c(){e=c("td"),t=c("a"),a=K(n),s(t,"target","_blank"),s(t,"href",r="https://ipfs.io/ipfs/"+l[7].cid),s(t,"class","svelte-1p9ambz"),s(e,"class","svelte-1p9ambz")},m(o,f){z(o,e,f),i(e,t),i(t,a)},p(o,f){f[0]&32&&n!==(n=o[7].cid+"")&&oe(a,n),f[0]&32&&r!==(r="https://ipfs.io/ipfs/"+o[7].cid)&&s(t,"href",r)},d(o){o&&C(e)}}}function sl(l){let e;return{c(){e=c("td"),e.innerHTML=`<div class="svelte-1p9ambz">Public</div> 
          <div class="faded svelte-1p9ambz">anyone can mint</div>`,s(e,"class","svelte-1p9ambz")},m(t,n){z(t,e,n)},p:he,d(t){t&&C(e)}}}function Lt(l){let e,t,n,a;function r(){return l[51](l[7])}return{c(){e=c("td"),t=c("button"),t.textContent="edit",s(t,"class","svelte-1p9ambz"),s(e,"class","invite-edit svelte-1p9ambz")},m(o,f){z(o,e,f),i(e,t),n||(a=D(t,"click",r),n=!0)},p(o,f){l=o},d(o){o&&C(e),n=!1,a()}}}function St(l){let e,t,n=(l[7].name?l[7].name:"")+"",a,r,o,f=l[7].key+"",m,u,p,d,_=l[7].limit+"",v,h,y,w,k=l[7].price+"",N,E,L,I,F=l[7].priceWei+"",S,P,J,V,M,Y=l[7].start+"",se,W,G,Z,x=l[7].startUnix+"",ee,ce,U,ie,q,me,re,ve,Q,T,$,ae,ue,j,X;function fe(le,de){return le[7].cid=="bafkreiaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"?sl:nl}let ne=fe(l),H=ne(l);function g(){return l[49](l[7])}function B(){return l[50](l[7])}let te=l[3]!=="public"&&Lt(l);return{c(){e=c("tr"),t=c("td"),a=K(n),r=b(),o=c("td"),m=K(f),u=b(),H.c(),p=b(),d=c("td"),v=K(_),h=b(),y=c("td"),w=c("div"),N=K(k),E=K(" ETH"),L=b(),I=c("div"),S=K(F),P=K(" wei"),J=b(),V=c("td"),M=c("div"),se=K(Y),W=b(),G=c("div"),Z=K("(unix timestamp: "),ee=K(x),ce=K(")"),U=b(),ie=c("td"),q=c("button"),q.textContent="mint",me=b(),re=c("div"),re.textContent="selected",ve=b(),Q=c("td"),T=c("button"),T.textContent="share",$=b(),te&&te.c(),ae=b(),s(t,"class","invite-name svelte-1p9ambz"),s(o,"class","svelte-1p9ambz"),s(d,"class","invite-limit svelte-1p9ambz"),s(w,"class","svelte-1p9ambz"),s(I,"class","faded svelte-1p9ambz"),s(y,"class","svelte-1p9ambz"),s(M,"class","svelte-1p9ambz"),s(G,"class","faded svelte-1p9ambz"),s(V,"class","svelte-1p9ambz"),s(q,"class","display svelte-1p9ambz"),s(re,"class","disabled svelte-1p9ambz"),s(ie,"class","invite-mint svelte-1p9ambz"),s(T,"class","display svelte-1p9ambz"),s(Q,"class","invite-share svelte-1p9ambz"),s(e,"class",ue=at(l[6]&&l[6].key==l[7].key?"selected":"")+" svelte-1p9ambz")},m(le,de){z(le,e,de),i(e,t),i(t,a),i(e,r),i(e,o),i(o,m),i(e,u),H.m(e,null),i(e,p),i(e,d),i(d,v),i(e,h),i(e,y),i(y,w),i(w,N),i(w,E),i(y,L),i(y,I),i(I,S),i(I,P),i(e,J),i(e,V),i(V,M),i(M,se),i(V,W),i(V,G),i(G,Z),i(G,ee),i(G,ce),i(e,U),i(e,ie),i(ie,q),i(ie,me),i(ie,re),i(e,ve),i(e,Q),i(Q,T),i(e,$),te&&te.m(e,null),i(e,ae),j||(X=[D(q,"click",g),D(T,"click",B)],j=!0)},p(le,de){l=le,de[0]&32&&n!==(n=(l[7].name?l[7].name:"")+"")&&oe(a,n),de[0]&32&&f!==(f=l[7].key+"")&&oe(m,f),ne===(ne=fe(l))&&H?H.p(l,de):(H.d(1),H=ne(l),H&&(H.c(),H.m(e,p))),de[0]&32&&_!==(_=l[7].limit+"")&&oe(v,_),de[0]&32&&k!==(k=l[7].price+"")&&oe(N,k),de[0]&32&&F!==(F=l[7].priceWei+"")&&oe(S,F),de[0]&32&&Y!==(Y=l[7].start+"")&&oe(se,Y),de[0]&32&&x!==(x=l[7].startUnix+"")&&oe(ee,x),l[3]!=="public"?te?te.p(l,de):(te=Lt(l),te.c(),te.m(e,ae)):te&&(te.d(1),te=null),de[0]&96&&ue!==(ue=at(l[6]&&l[6].key==l[7].key?"selected":"")+" svelte-1p9ambz")&&s(e,"class",ue)},d(le){le&&C(e),H.d(),te&&te.d(),j=!1,Te(X)}}}function al(l){let e,t,n,a,r,o,f,m,u,p,d,_,v,h,y,w,k,N,E,L,I,F,S,P,J,V,M,Y=l[7].price/1e18+"",se,W,G,Z,x,ee,ce,U,ie,q,me,re,ve,Q,T,$,ae,ue,j,X,fe,ne,H,g,B,te,le,de,Pe,be,We,O,we,ge,xe,Ue,ft,$e,ut,et,dt,tt,vt,pt,lt,He,ot,mt;function _t(R,_e){return R[10]=="hidden"?Zt:Yt}let it=_t(l),Me=it(l),Ne=l[13]&&gt(),Le=l[12]!="hidden"&&zt();function bt(R,_e){return R[18]=="0x0000000000000000000000000000000000000000000000000000000000000000"?$t:xt}let nt=bt(l),Oe=nt(l),Ce=l[14]&&Ct(l);function ht(R,_e){return R[11]?tl:el}let st=ht(l),Re=st(l),ke=l[21]&&It(l),Se=l[3]!=="public"&&Nt(),qe=l[5],Ie=[];for(let R=0;R<qe.length;R+=1)Ie[R]=St(wt(l,qe,R));return{c(){e=c("div"),t=c("h2"),t.textContent="Invites",n=b(),a=c("div"),r=c("button"),r.textContent="Create a Private Invite",o=b(),f=c("button"),f.textContent="Create a Public Invite",m=b(),u=c("form"),Me.c(),p=b(),Ne&&Ne.c(),d=b(),Le&&Le.c(),v=b(),h=c("form"),y=c("div"),w=c("div"),w.textContent="invite key",k=b(),N=c("div"),Oe.c(),E=b(),L=c("input"),I=b(),Ce&&Ce.c(),F=b(),S=c("div"),P=c("div"),P.textContent="price",J=b(),V=c("div"),M=c("div"),se=K(Y),W=K(" ETH"),G=b(),Z=c("input"),x=b(),ee=c("div"),ce=c("div"),ce.textContent="start time",U=b(),ie=c("div"),q=c("input"),me=b(),re=c("div"),re.innerHTML="Leave as &quot;1969-12-31 19:00&quot; <b>(Unix timestamp 0)</b> to start immediately",ve=b(),Q=c("input"),T=b(),$=c("div"),ae=c("div"),ae.textContent="mint limit",ue=b(),j=c("div"),X=c("input"),fe=b(),ne=c("div"),Re.c(),g=b(),ke&&ke.c(),B=b(),te=c("table"),le=c("tr"),de=c("th"),de.textContent="Name",Pe=b(),be=c("th"),be.textContent="Invite key",We=b(),O=c("th"),O.textContent="Invite list (IPFS)",we=b(),ge=c("th"),ge.textContent="limit",xe=b(),Ue=c("th"),Ue.textContent="price",ft=b(),$e=c("th"),$e.textContent="start time",ut=b(),et=c("th"),et.textContent="mint",dt=b(),tt=c("th"),tt.textContent="invite link",vt=b(),Se&&Se.c(),pt=b();for(let R=0;R<Ie.length;R+=1)Ie[R].c();s(r,"class","svelte-1p9ambz"),s(f,"class","svelte-1p9ambz"),s(a,"class","head svelte-1p9ambz"),s(u,"class",_="form "+l[9]+" svelte-1p9ambz"),s(w,"class","name svelte-1p9ambz"),L.disabled=!0,s(L,"type","text"),s(L,"class","svelte-1p9ambz"),s(N,"class","val svelte-1p9ambz"),s(y,"class","item svelte-1p9ambz"),s(P,"class","name svelte-1p9ambz"),s(M,"class","annotation svelte-1p9ambz"),s(Z,"type","text"),s(Z,"class","svelte-1p9ambz"),s(V,"class","val svelte-1p9ambz"),s(S,"class","item svelte-1p9ambz"),s(ce,"class","name svelte-1p9ambz"),s(q,"id","start"),s(q,"type","text"),s(q,"class","svelte-1p9ambz"),s(re,"class","annotation svelte-1p9ambz"),s(Q,"type","text"),s(Q,"id","picker"),s(Q,"class","svelte-1p9ambz"),s(ie,"class","val svelte-1p9ambz"),s(ee,"class","item svelte-1p9ambz"),s(ae,"class","name svelte-1p9ambz"),s(X,"type","text"),s(X,"class","svelte-1p9ambz"),s(j,"class","val svelte-1p9ambz"),s($,"class","item svelte-1p9ambz"),s(ne,"class","item svelte-1p9ambz"),s(h,"class",H="form "+l[10]+" svelte-1p9ambz"),s(de,"class","svelte-1p9ambz"),s(be,"class","svelte-1p9ambz"),s(O,"class","svelte-1p9ambz"),s(ge,"class","invite-limit svelte-1p9ambz"),s(Ue,"class","svelte-1p9ambz"),s($e,"class","svelte-1p9ambz"),s(et,"class","invite-mint svelte-1p9ambz"),s(tt,"class","invite-share svelte-1p9ambz"),s(te,"class","svelte-1p9ambz"),s(e,"class",lt="invites "+l[3]+" svelte-1p9ambz")},m(R,_e){z(R,e,_e),i(e,t),i(e,n),i(e,a),i(a,r),i(a,o),i(a,f),i(e,m),i(e,u),Me.m(u,null),i(u,p),Ne&&Ne.m(u,null),i(u,d),Le&&Le.m(u,null),i(e,v),i(e,h),i(h,y),i(y,w),i(y,k),i(y,N),Oe.m(N,null),i(N,E),i(N,L),A(L,l[18]),i(h,I),Ce&&Ce.m(h,null),i(h,F),i(h,S),i(S,P),i(S,J),i(S,V),i(V,M),i(M,se),i(M,W),i(V,G),i(V,Z),A(Z,l[7].price),i(h,x),i(h,ee),i(ee,ce),i(ee,U),i(ee,ie),i(ie,q),A(q,l[7].start),i(ie,me),i(ie,re),i(ie,ve),i(ie,Q),A(Q,l[4]),i(h,T),i(h,$),i($,ae),i($,ue),i($,j),i(j,X),A(X,l[7].limit),i(h,fe),i(h,ne),Re.m(ne,null),i(e,g),ke&&ke.m(e,null),i(e,B),i(e,te),i(te,le),i(le,de),i(le,Pe),i(le,be),i(le,We),i(le,O),i(le,we),i(le,ge),i(le,xe),i(le,Ue),i(le,ft),i(le,$e),i(le,ut),i(le,et),i(le,dt),i(le,tt),i(le,vt),Se&&Se.m(le,null),i(te,pt);for(let ze=0;ze<Ie.length;ze+=1)Ie[ze].m(te,null);He=!0,ot||(mt=[D(r,"click",l[24]),D(f,"click",l[25]),D(u,"submit",Be(Ae(l[26]))),D(L,"input",l[39]),D(Z,"input",l[41]),D(q,"input",l[42]),D(Q,"input",l[43]),D(X,"input",l[44]),D(h,"submit",Be(Ae(l[27])))],ot=!0)},p(R,_e){if(it===(it=_t(R))&&Me?Me.p(R,_e):(Me.d(1),Me=it(R),Me&&(Me.c(),Me.m(u,p))),R[13]?Ne||(Ne=gt(),Ne.c(),Ne.m(u,d)):Ne&&(Ne.d(1),Ne=null),R[12]!="hidden"?Le||(Le=zt(),Le.c(),Le.m(u,null)):Le&&(Le.d(1),Le=null),(!He||_e[0]&512&&_!==(_="form "+R[9]+" svelte-1p9ambz"))&&s(u,"class",_),nt!==(nt=bt(R))&&(Oe.d(1),Oe=nt(R),Oe&&(Oe.c(),Oe.m(N,E))),_e[0]&262144&&L.value!==R[18]&&A(L,R[18]),R[14]?Ce?Ce.p(R,_e):(Ce=Ct(R),Ce.c(),Ce.m(h,F)):Ce&&(Ce.d(1),Ce=null),(!He||_e[0]&128)&&Y!==(Y=R[7].price/10**18+"")&&oe(se,Y),_e[0]&128&&Z.value!==R[7].price&&A(Z,R[7].price),_e[0]&128&&q.value!==R[7].start&&A(q,R[7].start),_e[0]&16&&Q.value!==R[4]&&A(Q,R[4]),_e[0]&128&&X.value!==R[7].limit&&A(X,R[7].limit),st!==(st=ht(R))&&(Re.d(1),Re=st(R),Re&&(Re.c(),Re.m(ne,null))),(!He||_e[0]&1024&&H!==(H="form "+R[10]+" svelte-1p9ambz"))&&s(h,"class",H),R[21]?ke?(ke.p(R,_e),_e[0]&2097152&&pe(ke,1)):(ke=It(R),ke.c(),pe(ke,1),ke.m(e,B)):ke&&(Xe(),ye(ke,1,1,()=>{ke=null}),Ye()),R[3]!=="public"?Se||(Se=Nt(),Se.c(),Se.m(le,null)):Se&&(Se.d(1),Se=null),_e[0]&1879048296){qe=R[5];let ze;for(ze=0;ze<qe.length;ze+=1){const kt=wt(R,qe,ze);Ie[ze]?Ie[ze].p(kt,_e):(Ie[ze]=St(kt),Ie[ze].c(),Ie[ze].m(te,null))}for(;ze<Ie.length;ze+=1)Ie[ze].d(1);Ie.length=qe.length}(!He||_e[0]&8&&lt!==(lt="invites "+R[3]+" svelte-1p9ambz"))&&s(e,"class",lt)},i(R){He||(pe(ke),He=!0)},o(R){ye(ke),He=!1},d(R){R&&C(e),Me.d(),Ne&&Ne.d(),Le&&Le.d(),Oe.d(),Ce&&Ce.d(),Re.d(),ke&&ke.d(),Se&&Se.d(),ct(Ie,R),ot=!1,Te(mt)}}}function rl(l,e,t){let{invites:n={}}=e,{contract:a}=e,{inviteKey:r}=e,{web3:o}=e,{netPrefix:f}=e,{role:m}=e;const u=new F0,p=Ze();let d,_=[],v="",h="hidden",y="hidden",w=!1,k="",N,E,L,I,F,S=1,P,J,V,M,Y,se,W;const G=()=>{t(10,y="hidden"),t(9,h="")},Z=()=>{t(9,h="hidden"),t(14,E=""),t(18,P="0x0000000000000000000000000000000000000000000000000000000000000000"),t(10,y=""),flatpickr("#picker",{inline:!0,enableTime:!0,minuteIncrement:1,defaultDate:U.start?parseInt(U.start)*1e3:new Date(0)})},x=async()=>{let O=v.split(`
`).map(ge=>ge.trim()).filter(ge=>ge&&ge.length>0);t(13,N=!0),t(12,k="hidden"),console.log("listName",W);let we=await Xt(O,W);t(14,E=we),t(13,N=!1),L=new Invitelist(O),console.log("invitelist",L),t(18,P=L.root()),t(10,y=""),flatpickr("#picker",{inline:!0,enableTime:!0,minuteIncrement:1,defaultDate:U.start?parseInt(U.start)*1e3:new Date(0)})},ee=O=>{if(O&&O.length>0){let ge=new Cids(O).multihash;return ge=ge.reduce((xe,Ue)=>xe+Ue.toString(16).padStart(2,"0"),""),"0x"+ge.slice(4)}else return"0x00"},ce=async()=>{t(11,w=!0);let O=ee(E),we=await u.api.setInvite(P,O,U).send();console.log("tx",we),t(11,w=!1),t(10,y="hidden"),t(9,h="hidden"),p("refresh")};let U={price:0,limit:0,start:0};const ie=O=>{t(7,U.price=O.priceWei,U),t(7,U.limit=O.limit,U),t(7,U.start=O.startUnix,U),t(18,P=O.key),t(14,E=O.cid),t(10,y=""),console.log("invite.start",U.start),flatpickr("#picker",{inline:!0,enableTime:!0,minuteIncrement:1,defaultDate:U.start?parseInt(U.start)*1e3:new Date(0)})},q=async O=>{t(6,se=O),t(21,Y=!0),await re()},me=async O=>{t(6,se=O),t(21,Y=!0),await re()},re=async()=>{let O=se;console.log("*",O),J={key:O.key,proof:u._invites[O.key].proof},t(20,M=""+u._invites[O.key].condition.raw.price*S),t(19,V=JSON.stringify([J.key,J.proof]));try{p("error",{error:null});let we=await u.api.mint(J,S).estimate({value:M})}catch(we){p("error",{error:Qe(we.message)})}},ve=async()=>{try{t(16,F=!0),p("error",{error:null}),t(15,I=await u.api.mint(J,S).send({value:M}))}catch(O){p("error",{error:Qe(O.message)})}t(16,F=!1)};Kt(async()=>{await u.init({web3:o,contract:a}),n&&n[r]&&await q(n[r])});let Q;function T(){W=this.value,t(22,W)}function $(){v=this.value,t(8,v)}function ae(){W=this.value,t(22,W)}function ue(){v=this.value,t(8,v)}function j(){P=this.value,t(18,P)}function X(){E=this.value,t(14,E)}function fe(){U.price=this.value,t(7,U),t(33,n),t(5,_),t(4,d)}function ne(){U.start=this.value,t(7,U),t(33,n),t(5,_),t(4,d)}function H(){d=this.value,t(4,d)}function g(){U.limit=this.value,t(7,U),t(33,n),t(5,_),t(4,d)}function B(){Q=this.value,t(23,Q),t(6,se),t(0,a)}function te(){S=rt(this.value),t(17,S)}const le=()=>{re()},de=()=>{ve()},Pe=O=>{q(O)},be=O=>{me(O)},We=O=>{ie(O)};return l.$$set=O=>{"invites"in O&&t(33,n=O.invites),"contract"in O&&t(0,a=O.contract),"inviteKey"in O&&t(34,r=O.inviteKey),"web3"in O&&t(1,o=O.web3),"netPrefix"in O&&t(2,f=O.netPrefix),"role"in O&&t(3,m=O.role)},l.$$.update=()=>{if(l.$$.dirty[0]&176|l.$$.dirty[1]&4){t(5,_=[]);for(let O in n){let we=n[O].condition,ge=new Date(we.converted.start);_.push({name:n[O].name,key:O,cid:n[O].cid,limit:`${we.converted.limit}`,price:`${we.converted.eth}`,priceWei:`${we.raw.price}`,start:`${ge.toDateString()} ${ge.toLocaleTimeString()}`,startUnix:we.raw.start})}d&&(t(7,U.start=new Date(d).getTime()/1e3,U),console.log("# picker",d),console.log("inviet.start",U.start))}l.$$.dirty[0]&65&&se&&t(23,Q=location.protocol+"//"+location.host+location.pathname+"#"+a+":mint:"+se.key)},[a,o,f,m,d,_,se,U,v,h,y,w,k,N,E,I,F,S,P,V,M,Y,W,Q,G,Z,x,ce,ie,q,me,re,ve,n,r,T,$,ae,ue,j,X,fe,ne,H,g,B,te,le,de,Pe,be,We]}class ol extends je{constructor(e){super(),Je(this,e,rl,al,Ve,{invites:33,contract:0,inviteKey:34,web3:1,netPrefix:2,role:3},null,[-1,-1])}}function cl(l){let e;return{c(){e=c("input"),s(e,"class","display svelte-trhosb"),s(e,"type","submit"),e.value="withdraw"},m(t,n){z(t,e,n)},d(t){t&&C(e)}}}function fl(l){let e;return{c(){e=c("div"),e.innerHTML='<i class="fa-solid fa-circle-notch fa-spin"></i><br/>withdrawing...',s(e,"class","loading svelte-trhosb")},m(t,n){z(t,e,n)},d(t){t&&C(e)}}}function ul(l){let e,t,n;return{c(){e=c("button"),e.textContent="Set withdrawer",s(e,"class","svelte-trhosb")},m(a,r){z(a,e,r),t||(n=D(e,"click",l[8]),t=!0)},p:he,d(a){a&&C(e),t=!1,n()}}}function dl(l){let e,t,n,a,r,o,f,m,u,p,d,_;function v(w,k){return w[5]?pl:vl}let h=v(l),y=h(l);return{c(){e=c("br"),t=b(),n=c("input"),a=b(),r=c("div"),o=c("input"),f=b(),m=c("label"),m.textContent="permanent (can't change forever)",u=b(),y.c(),p=Ke(),s(n,"type","text"),s(n,"placeholder","enter the withdrawer address"),s(o,"name","permanent"),s(o,"type","checkbox"),s(m,"for","permanent"),s(m,"class","svelte-trhosb"),s(r,"class","annotation svelte-trhosb")},m(w,k){z(w,e,k),z(w,t,k),z(w,n,k),A(n,l[6].account),z(w,a,k),z(w,r,k),i(r,o),o.checked=l[6].permanent,i(r,f),i(r,m),z(w,u,k),y.m(w,k),z(w,p,k),d||(_=[D(n,"input",l[12]),D(o,"change",l[13])],d=!0)},p(w,k){k&64&&n.value!==w[6].account&&A(n,w[6].account),k&64&&(o.checked=w[6].permanent),h!==(h=v(w))&&(y.d(1),y=h(w),y&&(y.c(),y.m(p.parentNode,p)))},d(w){w&&C(e),w&&C(t),w&&C(n),w&&C(a),w&&C(r),w&&C(u),y.d(w),w&&C(p),d=!1,Te(_)}}}function vl(l){let e;return{c(){e=c("input"),s(e,"type","submit"),e.value="save to the blockchain",s(e,"class","svelte-trhosb")},m(t,n){z(t,e,n)},d(t){t&&C(e)}}}function pl(l){let e;return{c(){e=c("div"),e.innerHTML='<i class="fa-solid fa-circle-notch fa-spin"></i><br/>setting the withdrawer...',s(e,"class","loading svelte-trhosb")},m(t,n){z(t,e,n)},d(t){t&&C(e)}}}function ml(l){let e,t,n,a,r,o,f,m,u,p,d,_,v,h,y,w,k,N,E,L,I,F,S,P,J,V,M,Y,se=l[6].account+"",W,G,Z,x,ee=l[6].permanent+"",ce,U,ie,q,me,re,ve;function Q(X,fe){return X[4]?fl:cl}let T=Q(l),$=T(l);function ae(X,fe){return X[3]?dl:ul}let ue=ae(l),j=ue(l);return{c(){e=c("div"),t=c("h2"),t.textContent="Revenue",n=b(),a=c("div"),r=c("form"),o=c("div"),f=c("div"),f.textContent="withdraw",m=b(),u=c("div"),p=c("div"),p.textContent="Balance",d=b(),_=c("div"),v=K(l[2]),h=K(" ETH ("),y=K(l[1]),w=K(" wei)"),k=b(),$.c(),N=b(),E=c("div"),L=c("form"),I=c("div"),F=c("div"),F.textContent="set withdrawer",S=b(),P=c("div"),J=c("div"),J.textContent="Current withdrawer",V=b(),M=c("div"),Y=K("account: "),W=K(se),G=b(),Z=c("div"),x=K("permanent: "),ce=K(ee),U=b(),j.c(),ie=b(),q=c("div"),q.innerHTML=`<div class="form svelte-trhosb"><div class="item svelte-trhosb"><div class="name svelte-trhosb">Revenue split</div> 
        <div class="val"><div class="faded svelte-trhosb">Moneypipe</div> 
          <div class="annotation svelte-trhosb">Auto-split mint revenue among multiple people using moneypipe:</div> 
          <a class="btn display svelte-trhosb" href="https://moneypipe.xyz">Create a revenue split on Moneypipe</a></div></div></div>`,s(f,"class","name svelte-trhosb"),s(p,"class","faded svelte-trhosb"),s(_,"class","annotation svelte-trhosb"),s(u,"class","val"),s(o,"class","item svelte-trhosb"),s(r,"class","form svelte-trhosb"),s(F,"class","name svelte-trhosb"),s(J,"class","faded svelte-trhosb"),s(M,"class","annotation svelte-trhosb"),s(Z,"class","annotation svelte-trhosb"),s(P,"class","val"),s(I,"class","item svelte-trhosb"),s(L,"class","form svelte-trhosb"),s(e,"class",me="revenue "+l[0]+" svelte-trhosb")},m(X,fe){z(X,e,fe),i(e,t),i(e,n),i(e,a),i(a,r),i(r,o),i(o,f),i(o,m),i(o,u),i(u,p),i(u,d),i(u,_),i(_,v),i(_,h),i(_,y),i(_,w),i(u,k),$.m(u,null),i(e,N),i(e,E),i(E,L),i(L,I),i(I,F),i(I,S),i(I,P),i(P,J),i(P,V),i(P,M),i(M,Y),i(M,W),i(P,G),i(P,Z),i(Z,x),i(Z,ce),i(P,U),j.m(P,null),i(e,ie),i(e,q),re||(ve=[D(r,"submit",Be(Ae(l[7]))),D(L,"submit",Be(Ae(l[9])))],re=!0)},p(X,[fe]){fe&4&&oe(v,X[2]),fe&2&&oe(y,X[1]),T!==(T=Q(X))&&($.d(1),$=T(X),$&&($.c(),$.m(u,null))),fe&64&&se!==(se=X[6].account+"")&&oe(W,se),fe&64&&ee!==(ee=X[6].permanent+"")&&oe(ce,ee),ue===(ue=ae(X))&&j?j.p(X,fe):(j.d(1),j=ue(X),j&&(j.c(),j.m(P,null))),fe&1&&me!==(me="revenue "+X[0]+" svelte-trhosb")&&s(e,"class",me)},i:he,o:he,d(X){X&&C(e),$.d(),j.d(),re=!1,Te(ve)}}}function _l(l,e,t){let{contract:n}=e,{web3:a}=e,{role:r}=e,o,f,m,u,p,d={account:"",permanent:!1};const _=Ze(),v=async()=>{try{t(4,u=!0);let I=await k.api.withdraw().send()}catch(I){_("error",{error:Qe(I.message)})}t(4,u=!1),await N()},h=()=>{t(3,m=!0)},y=async()=>{try{t(5,p=!0),console.log("settingWithdrawer",p);let I=await k.api.setWithdrawer(d).send()}catch(I){_("error",{error:Qe(I.message)})}t(5,p=!1),await N()},w=async()=>{let I=await k.web3.eth.getBalance(n);console.log("_balance",I),t(1,o=I),t(2,f=o/10**18),console.log("f0.api",k.api);let F=await k.api.withdrawer().call();console.log("withdd",F),t(6,d=F)},k=new F0,N=async()=>{await k.init({web3:a,contract:n}),await w()};N();function E(){d.account=this.value,t(6,d)}function L(){d.permanent=this.checked,t(6,d)}return l.$$set=I=>{"contract"in I&&t(10,n=I.contract),"web3"in I&&t(11,a=I.web3),"role"in I&&t(0,r=I.role)},[r,o,f,m,u,p,d,v,h,y,n,a,E,L]}class bl extends je{constructor(e){super(),Je(this,e,_l,ml,Ve,{contract:10,web3:11,role:0})}}function hl(l){let e,t,n;return{c(){e=c("button"),e.textContent="Transfer ownership",s(e,"class","svelte-trhosb")},m(a,r){z(a,e,r),t||(n=D(e,"click",l[4]),t=!0)},p:he,d(a){a&&C(e),t=!1,n()}}}function kl(l){let e,t,n,a,r,o,f;function m(d,_){return d[2]?wl:yl}let u=m(l),p=u(l);return{c(){e=c("br"),t=b(),n=c("input"),a=b(),p.c(),r=Ke(),s(n,"type","text"),s(n,"placeholder","enter the withdrawer address")},m(d,_){z(d,e,_),z(d,t,_),z(d,n,_),A(n,l[1]),z(d,a,_),p.m(d,_),z(d,r,_),o||(f=D(n,"input",l[9]),o=!0)},p(d,_){_&2&&n.value!==d[1]&&A(n,d[1]),u!==(u=m(d))&&(p.d(1),p=u(d),p&&(p.c(),p.m(r.parentNode,r)))},d(d){d&&C(e),d&&C(t),d&&C(n),d&&C(a),p.d(d),d&&C(r),o=!1,f()}}}function yl(l){let e;return{c(){e=c("input"),s(e,"type","submit"),e.value="save to the blockchain",s(e,"class","svelte-trhosb")},m(t,n){z(t,e,n)},d(t){t&&C(e)}}}function wl(l){let e;return{c(){e=c("div"),e.innerHTML='<i class="fa-solid fa-circle-notch fa-spin"></i><br/>setting the withdrawer...',s(e,"class","loading svelte-trhosb")},m(t,n){z(t,e,n)},d(t){t&&C(e)}}}function gl(l){let e,t,n,a,r,o,f,m,u,p,d,_,v,h,y,w,k;function N(I,F){return I[3]?kl:hl}let E=N(l),L=E(l);return{c(){e=c("div"),t=c("h2"),t.textContent="Ownership",n=b(),a=c("div"),r=c("form"),o=c("div"),f=c("div"),f.textContent="ownership",m=b(),u=c("div"),p=c("div"),p.textContent="Current owner",d=b(),_=c("div"),v=K(l[1]),h=b(),L.c(),s(f,"class","name svelte-trhosb"),s(p,"class","faded svelte-trhosb"),s(_,"class","annotation svelte-trhosb"),s(u,"class","val"),s(o,"class","item svelte-trhosb"),s(r,"class","form svelte-trhosb"),s(e,"class",y="ownership "+l[0]+" svelte-trhosb")},m(I,F){z(I,e,F),i(e,t),i(e,n),i(e,a),i(a,r),i(r,o),i(o,f),i(o,m),i(o,u),i(u,p),i(u,d),i(u,_),i(_,v),i(u,h),L.m(u,null),w||(k=D(r,"submit",Be(Ae(l[5]))),w=!0)},p(I,[F]){F&2&&oe(v,I[1]),E===(E=N(I))&&L?L.p(I,F):(L.d(1),L=E(I),L&&(L.c(),L.m(u,null))),F&1&&y!==(y="ownership "+I[0]+" svelte-trhosb")&&s(e,"class",y)},i:he,o:he,d(I){I&&C(e),L.d(),w=!1,k()}}}function zl(l,e,t){let{contract:n}=e,{chainId:a}=e,{web3:r}=e,{role:o}=e;const f=Ze();let m,u,p,d;const _=()=>{t(3,p=!0)},v=async()=>{try{t(2,u=!0),console.log("factoryContract",d);let k=await d.methods.addCollection(m,n).send({from:h.account});console.log("tx1",k),k=await h.api.transferOwnership(m).send(),console.log("tx2",k)}catch(k){f("error",{error:Qe(k.message)})}t(2,u=!1),await y()};let h=new F0;const y=async()=>{await h.init({web3:r,contract:n}),t(1,m=await h.api.owner().call()),d=await At(r,"v2")};y();function w(){m=this.value,t(1,m)}return l.$$set=k=>{"contract"in k&&t(6,n=k.contract),"chainId"in k&&t(7,a=k.chainId),"web3"in k&&t(8,r=k.web3),"role"in k&&t(0,o=k.role)},[o,m,u,p,_,v,n,a,r,w]}class Cl extends je{constructor(e){super(),Je(this,e,zl,gl,Ve,{contract:6,chainId:7,web3:8,role:0})}}function Il(l){let e,t,n,a,r,o,f,m,u,p,d,_,v,h,y,w,k,N,E,L,I,F,S=l[1].permanent+"",P,J,V;return{c(){e=c("div"),t=c("div"),n=c("div"),n.textContent="receiver",a=b(),r=c("div"),o=c("input"),f=b(),m=c("div"),u=c("div"),u.textContent="amount",p=b(),d=c("div"),_=c("input"),v=b(),h=c("div"),y=K(l[4]),w=K("%"),k=b(),N=c("div"),E=c("div"),E.textContent="permanent",L=b(),I=c("div"),F=c("label"),P=K(S),s(n,"class","name svelte-1xxx6vd"),o.disabled=!0,s(o,"type","text"),s(o,"placeholder","enter the royalty receiver address"),s(r,"class","val"),s(t,"class","item svelte-1xxx6vd"),s(u,"class","name svelte-1xxx6vd"),_.disabled=!0,s(_,"type","text"),s(_,"placeholder","enter the royalty amount out of 1000000"),s(h,"class","annotation svelte-1xxx6vd"),s(d,"class","val"),s(m,"class","item svelte-1xxx6vd"),s(E,"class","name svelte-1xxx6vd"),s(F,"for","permanent"),s(F,"class","svelte-1xxx6vd"),s(I,"class","val"),s(N,"class","item svelte-1xxx6vd"),s(e,"class","form svelte-1xxx6vd")},m(M,Y){z(M,e,Y),i(e,t),i(t,n),i(t,a),i(t,r),i(r,o),A(o,l[1].receiver),i(e,f),i(e,m),i(m,u),i(m,p),i(m,d),i(d,_),A(_,l[1].amount),i(d,v),i(d,h),i(h,y),i(h,w),i(e,k),i(e,N),i(N,E),i(N,L),i(N,I),i(I,F),i(F,P),J||(V=[D(o,"input",l[14]),D(_,"input",l[15])],J=!0)},p(M,Y){Y&2&&o.value!==M[1].receiver&&A(o,M[1].receiver),Y&2&&_.value!==M[1].amount&&A(_,M[1].amount),Y&16&&oe(y,M[4]),Y&2&&S!==(S=M[1].permanent+"")&&oe(P,S)},d(M){M&&C(e),J=!1,Te(V)}}}function Tl(l){let e,t,n,a,r,o,f,m,u,p,d,_,v,h,y,w,k,N,E,L,I,F,S,P,J,V,M,Y,se;function W(x,ee){return x[2]?Sl:x[3]?Ll:Nl}let G=W(l),Z=G(l);return{c(){e=c("div"),t=c("form"),n=c("div"),a=c("div"),a.textContent="receiver",r=b(),o=c("div"),f=c("input"),m=b(),u=c("div"),p=c("div"),p.textContent="amount",d=b(),_=c("div"),v=c("input"),h=b(),y=c("div"),w=K(l[4]),k=K("%"),N=b(),E=c("div"),L=c("div"),L.textContent="permanent",I=b(),F=c("div"),S=c("input"),P=b(),J=c("label"),J.textContent="make permanent",V=b(),M=c("div"),Z.c(),s(a,"class","name svelte-1xxx6vd"),s(f,"type","text"),s(f,"placeholder","enter the royalty receiver address"),s(o,"class","val"),s(n,"class","item svelte-1xxx6vd"),s(p,"class","name svelte-1xxx6vd"),s(v,"type","text"),s(v,"placeholder","enter the royalty amount out of 1000000"),s(y,"class","annotation svelte-1xxx6vd"),s(_,"class","val"),s(u,"class","item svelte-1xxx6vd"),s(L,"class","name svelte-1xxx6vd"),s(S,"type","checkbox"),s(J,"for","permanent"),s(J,"class","svelte-1xxx6vd"),s(F,"class","val"),s(E,"class","item svelte-1xxx6vd"),s(M,"class","item svelte-1xxx6vd"),s(t,"class","form svelte-1xxx6vd"),s(e,"class","form svelte-1xxx6vd")},m(x,ee){z(x,e,ee),i(e,t),i(t,n),i(n,a),i(n,r),i(n,o),i(o,f),A(f,l[1].receiver),i(t,m),i(t,u),i(u,p),i(u,d),i(u,_),i(_,v),A(v,l[1].amount),i(_,h),i(_,y),i(y,w),i(y,k),i(t,N),i(t,E),i(E,L),i(E,I),i(E,F),i(F,S),S.checked=l[1].permanent,i(F,P),i(F,J),i(t,V),i(t,M),Z.m(M,null),Y||(se=[D(f,"input",l[11]),D(v,"input",l[12]),D(S,"change",l[13]),D(t,"submit",Be(Ae(l[6])))],Y=!0)},p(x,ee){ee&2&&f.value!==x[1].receiver&&A(f,x[1].receiver),ee&2&&v.value!==x[1].amount&&A(v,x[1].amount),ee&16&&oe(w,x[4]),ee&2&&(S.checked=x[1].permanent),G!==(G=W(x))&&(Z.d(1),Z=G(x),Z&&(Z.c(),Z.m(M,null)))},d(x){x&&C(e),Z.d(),Y=!1,Te(se)}}}function Nl(l){let e,t,n;return{c(){e=c("div"),t=b(),n=c("div"),n.innerHTML='<input type="submit" value="save to the blockchain" class="svelte-1xxx6vd"/>',s(e,"class","name svelte-1xxx6vd"),s(n,"class","val")},m(a,r){z(a,e,r),z(a,t,r),z(a,n,r)},d(a){a&&C(e),a&&C(t),a&&C(n)}}}function Ll(l){let e;return{c(){e=c("div"),e.innerHTML='<i class="fa-solid fa-circle-notch fa-spin"></i><br/>setting the royalty information...',s(e,"class","loading svelte-1xxx6vd")},m(t,n){z(t,e,n)},d(t){t&&C(e)}}}function Sl(l){let e;return{c(){e=c("div"),e.innerHTML='<i class="fa-solid fa-circle-notch fa-spin"></i><br/>connecting the royalty contract with factoria...',s(e,"class","loading svelte-1xxx6vd")},m(t,n){z(t,e,n)},d(t){t&&C(e)}}}function Ml(l){let e,t,n,a,r,o,f,m,u;function p(v,h){return v[5]?Tl:Il}let d=p(l),_=d(l);return{c(){e=c("div"),t=c("h2"),t.textContent="Royalty",n=b(),a=c("div"),r=c("button"),r.textContent="edit",o=b(),_.c(),s(r,"class","svelte-1xxx6vd"),s(a,"class","head svelte-1xxx6vd"),s(e,"class",f="royalty "+l[0]+" svelte-1xxx6vd")},m(v,h){z(v,e,h),i(e,t),i(e,n),i(e,a),i(a,r),i(e,o),_.m(e,null),m||(u=D(r,"click",l[7]),m=!0)},p(v,[h]){d===(d=p(v))&&_?_.p(v,h):(_.d(1),_=d(v),_&&(_.c(),_.m(e,null))),h&1&&f!==(f="royalty "+v[0]+" svelte-1xxx6vd")&&s(e,"class",f)},i:he,o:he,d(v){v&&C(e),_.d(),m=!1,u()}}}function Pl(l,e,t){let{contract:n}=e,{chainId:a}=e,{web3:r}=e,{role:o}=e;Ze();let f,m,u,p,d,_=new F0,v={receiver:"",amount:0,permanent:!1},h;Vt(r,"v2").then(S=>{f=S}),At(r,"v2").then(S=>{});const y=async()=>{await _.init({web3:r,contract:n}),h=await _.api.royalty().call(),h!=="0x0000000000000000000000000000000000000000"&&t(1,v=await f.methods.royalty(n).call())},w=async()=>{let P=(await window.ethereum.send("eth_requestAccounts")).result[0];console.log("R",v),t(3,u=!0);let J=await f.methods.set(n,v).send({from:P});if(console.log("set ro tx",J),t(3,u=!1),h==="0x0000000000000000000000000000000000000000"){t(2,m=!0),console.log("royalty address",f,f._address);let V=await _.api.setRoyalty(f._address).send({from:P});console.log("connect to factoria tx",V),t(2,m=!1)}await y()},k=()=>{t(5,d=!0)};y();function N(){v.receiver=this.value,t(1,v)}function E(){v.amount=this.value,t(1,v)}function L(){v.permanent=this.checked,t(1,v)}function I(){v.receiver=this.value,t(1,v)}function F(){v.amount=this.value,t(1,v)}return l.$$set=S=>{"contract"in S&&t(8,n=S.contract),"chainId"in S&&t(9,a=S.chainId),"web3"in S&&t(10,r=S.web3),"role"in S&&t(0,o=S.role)},l.$$.update=()=>{l.$$.dirty&2&&t(4,p=v.amount/1e4)},[o,v,m,u,p,d,w,k,n,a,r,N,E,L,I,F]}class Hl extends je{constructor(e){super(),Je(this,e,Pl,Ml,Ve,{contract:8,chainId:9,web3:10,role:0})}}function Ol(l){let e,t,n,a,r,o,f,m,u,p,d,_,v,h,y,w;return{c(){e=c("form"),t=c("div"),n=c("div"),n.textContent="receiver address",a=b(),r=c("div"),o=c("input"),f=b(),m=c("div"),u=c("div"),u.textContent="count",p=b(),d=c("div"),_=c("input"),v=b(),h=c("div"),h.innerHTML=`<div class="name svelte-1yo3cv5"></div> 
        <div class="val"><input type="submit" value="Gift" class="svelte-1yo3cv5"/></div>`,s(n,"class","name svelte-1yo3cv5"),s(o,"type","text"),s(o,"placeholder","receiver address"),s(r,"class","val"),s(t,"class","item svelte-1yo3cv5"),s(u,"class","name svelte-1yo3cv5"),s(_,"type","number"),s(_,"placeholder","how many tokens to gift"),s(d,"class","val"),s(m,"class","item svelte-1yo3cv5"),s(h,"class","item svelte-1yo3cv5"),s(e,"class","form")},m(k,N){z(k,e,N),i(e,t),i(t,n),i(t,a),i(t,r),i(r,o),A(o,l[5]),i(e,f),i(e,m),i(m,u),i(m,p),i(m,d),i(d,_),A(_,l[4]),i(e,v),i(e,h),y||(w=[D(o,"input",l[10]),D(_,"input",l[11]),D(e,"submit",Be(Ae(l[7])))],y=!0)},p(k,N){N&32&&o.value!==k[5]&&A(o,k[5]),N&16&&rt(_.value)!==k[4]&&A(_,k[4])},d(k){k&&C(e),y=!1,Te(w)}}}function Rl(l){let e;return{c(){e=c("div"),e.innerHTML='<i class="fa-solid fa-circle-notch fa-spin"></i><br/>gifting NFTs...',s(e,"class","loading svelte-1yo3cv5")},m(t,n){z(t,e,n)},p:he,d(t){t&&C(e)}}}function Mt(l){let e,t;return e=new Bt({props:{tx:l[6],web3:l[1],contract:l[0]}}),{c(){Fe(e.$$.fragment)},m(n,a){De(e,n,a),t=!0},p(n,a){const r={};a&64&&(r.tx=n[6]),a&2&&(r.web3=n[1]),a&1&&(r.contract=n[0]),e.$set(r)},i(n){t||(pe(e.$$.fragment,n),t=!0)},o(n){ye(e.$$.fragment,n),t=!1},d(n){Ee(e,n)}}}function Fl(l){let e,t,n,a,r,o;function f(d,_){return d[3]?Rl:Ol}let m=f(l),u=m(l),p=l[6]&&Mt(l);return{c(){e=c("div"),t=c("h2"),t.textContent="Gift",n=b(),u.c(),a=b(),p&&p.c(),s(e,"class",r="gift "+l[2]+" svelte-1yo3cv5")},m(d,_){z(d,e,_),i(e,t),i(e,n),u.m(e,null),i(e,a),p&&p.m(e,null),o=!0},p(d,[_]){m===(m=f(d))&&u?u.p(d,_):(u.d(1),u=m(d),u&&(u.c(),u.m(e,a))),d[6]?p?(p.p(d,_),_&64&&pe(p,1)):(p=Mt(d),p.c(),pe(p,1),p.m(e,null)):p&&(Xe(),ye(p,1,1,()=>{p=null}),Ye()),(!o||_&4&&r!==(r="gift "+d[2]+" svelte-1yo3cv5"))&&s(e,"class",r)},i(d){o||(pe(p),o=!0)},o(d){ye(p),o=!1},d(d){d&&C(e),u.d(),p&&p.d()}}}function Dl(l,e,t){let{invites:n={}}=e,{contract:a}=e,{web3:r}=e,{netPrefix:o}=e,{role:f}=e,m,u,p,d;Ze();const _=new F0,v=async()=>{await _.init({web3:r,contract:a})},h=async()=>{t(3,m=!0),t(6,d=await _.api.gift(p,u).send({from:_.account})),t(5,p=""),t(4,u=0),t(3,m=!1)};v();function y(){p=this.value,t(5,p)}function w(){u=rt(this.value),t(4,u)}return l.$$set=k=>{"invites"in k&&t(8,n=k.invites),"contract"in k&&t(0,a=k.contract),"web3"in k&&t(1,r=k.web3),"netPrefix"in k&&t(9,o=k.netPrefix),"role"in k&&t(2,f=k.role)},[a,r,f,m,u,p,d,h,n,o,y,w]}class El extends je{constructor(e){super(),Je(this,e,Dl,Fl,Ve,{invites:8,contract:0,web3:1,netPrefix:9,role:2})}}function Pt(l,e,t){const n=l.slice();return n[41]=e[t],n[42]=e,n[43]=t,n}function Ht(l,e,t){const n=l.slice();return n[44]=e[t],n}function Wl(l){let e,t,n,a,r,o,f,m,u,p,d,_,v,h,y,w,k,N,E,L,I,F,S,P,J,V,M,Y,se,W,G,Z,x,ee,ce,U,ie,q,me;function re(g,B){return g[21].editable?Kl:Al}let ve=re(l),Q=ve(l);function T(g,B){return g[21].editable?ql:Ul}let $=T(l),ae=$(l),ue=l[5],j=[];for(let g=0;g<ue.length;g+=1)j[g]=Et(Pt(l,ue,g));function X(g,B){return g[20].editable?ei:$l}let fe=X(l),ne=fe(l),H=l[15]!="public"&&Wt(l);return N=new ol({props:{role:l[15],netPrefix:l[9],invites:l[12],inviteKey:l[16],contract:l[14],web3:l[22]}}),N.$on("refresh",l[23]),N.$on("error",l[24]),I=new Hl({props:{role:l[15],contract:l[14],web3:l[22],chainId:l[8]}}),I.$on("error",l[24]),P=new bl({props:{role:l[15],contract:l[14],web3:l[22]}}),P.$on("error",l[24]),M=new Cl({props:{role:l[15],contract:l[14],web3:l[22],chainId:l[8]}}),M.$on("error",l[24]),{c(){e=c("div"),t=c("div"),n=c("div"),Q.c(),a=b(),r=c("div"),ae.c(),o=b(),f=c("div"),m=c("div"),u=c("h2"),u.textContent="Configuration",p=b();for(let g=0;g<j.length;g+=1)j[g].c();d=b(),_=c("div"),ne.c(),v=b(),H&&H.c(),h=b(),y=c("div"),w=c("div"),k=b(),Fe(N.$$.fragment),E=b(),L=c("div"),Fe(I.$$.fragment),F=b(),S=c("div"),Fe(P.$$.fragment),J=b(),V=c("div"),Fe(M.$$.fragment),Y=b(),se=c("div"),W=c("div"),G=c("h2"),G.textContent="ABI",Z=b(),x=c("br"),ee=b(),ce=c("textarea"),s(r,"class","item svelte-8zxh9s"),s(n,"class","ns"),s(t,"class","info svelte-8zxh9s"),s(_,"class","item svelte-8zxh9s"),s(m,"class","config"),s(f,"class","info svelte-8zxh9s"),s(y,"class","info svelte-8zxh9s"),s(L,"class","info svelte-8zxh9s"),s(S,"class","info svelte-8zxh9s"),s(V,"class","info svelte-8zxh9s"),ce.readOnly=!0,s(ce,"class","svelte-8zxh9s"),s(W,"class","abi svelte-8zxh9s"),s(se,"class","info svelte-8zxh9s"),s(e,"class",U=at(l[15])+" svelte-8zxh9s")},m(g,B){z(g,e,B),i(e,t),i(t,n),Q.m(n,null),i(n,a),i(n,r),ae.m(r,null),i(e,o),i(e,f),i(f,m),i(m,u),i(m,p);for(let te=0;te<j.length;te+=1)j[te].m(m,null);i(m,d),i(m,_),ne.m(_,null),i(e,v),H&&H.m(e,null),i(e,h),i(e,y),i(y,w),l[34](w),i(y,k),De(N,y,null),i(e,E),i(e,L),De(I,L,null),i(e,F),i(e,S),De(P,S,null),i(e,J),i(e,V),De(M,V,null),i(e,Y),i(e,se),i(se,W),i(W,G),i(W,Z),i(W,x),i(W,ee),i(W,ce),A(ce,l[17]),ie=!0,q||(me=D(ce,"input",l[35]),q=!0)},p(g,B){if(ve===(ve=re(g))&&Q?Q.p(g,B):(Q.d(1),Q=ve(g),Q&&(Q.c(),Q.m(n,a))),$===($=T(g))&&ae?ae.p(g,B):(ae.d(1),ae=$(g),ae&&(ae.c(),ae.m(r,null))),B[0]&100666469){ue=g[5];let be;for(be=0;be<ue.length;be+=1){const We=Pt(g,ue,be);j[be]?j[be].p(We,B):(j[be]=Et(We),j[be].c(),j[be].m(m,d))}for(;be<j.length;be+=1)j[be].d(1);j.length=ue.length}fe===(fe=X(g))&&ne?ne.p(g,B):(ne.d(1),ne=fe(g),ne&&(ne.c(),ne.m(_,null))),g[15]!="public"?H?(H.p(g,B),B[0]&32768&&pe(H,1)):(H=Wt(g),H.c(),pe(H,1),H.m(e,h)):H&&(Xe(),ye(H,1,1,()=>{H=null}),Ye());const te={};B[0]&32768&&(te.role=g[15]),B[0]&512&&(te.netPrefix=g[9]),B[0]&4096&&(te.invites=g[12]),B[0]&65536&&(te.inviteKey=g[16]),B[0]&16384&&(te.contract=g[14]),N.$set(te);const le={};B[0]&32768&&(le.role=g[15]),B[0]&16384&&(le.contract=g[14]),B[0]&256&&(le.chainId=g[8]),I.$set(le);const de={};B[0]&32768&&(de.role=g[15]),B[0]&16384&&(de.contract=g[14]),P.$set(de);const Pe={};B[0]&32768&&(Pe.role=g[15]),B[0]&16384&&(Pe.contract=g[14]),B[0]&256&&(Pe.chainId=g[8]),M.$set(Pe),B[0]&131072&&A(ce,g[17]),(!ie||B[0]&32768&&U!==(U=at(g[15])+" svelte-8zxh9s"))&&s(e,"class",U)},i(g){ie||(pe(H),pe(N.$$.fragment,g),pe(I.$$.fragment,g),pe(P.$$.fragment,g),pe(M.$$.fragment,g),ie=!0)},o(g){ye(H),ye(N.$$.fragment,g),ye(I.$$.fragment,g),ye(P.$$.fragment,g),ye(M.$$.fragment,g),ie=!1},d(g){g&&C(e),Q.d(),ae.d(),ct(j,g),ne.d(),H&&H.d(),l[34](null),Ee(N),Ee(I),Ee(P),Ee(M),q=!1,me()}}}function Bl(l){let e;return{c(){e=c("div"),e.innerHTML='<i class="fa-solid fa-circle-notch fa-spin"></i><br/>loading...',s(e,"class","loading")},m(t,n){z(t,e,n)},p:he,i:he,o:he,d(t){t&&C(e)}}}function Al(l){let e,t,n,a,r,o;return{c(){e=c("div"),t=c("h1"),n=K(l[3]),a=K(" ("),r=K(l[4]),o=K(")"),s(t,"class","svelte-8zxh9s"),s(e,"class","item svelte-8zxh9s")},m(f,m){z(f,e,m),i(e,t),i(t,n),i(t,a),i(t,r),i(t,o)},p(f,m){m[0]&8&&oe(n,f[3]),m[0]&16&&oe(r,f[4])},d(f){f&&C(e)}}}function Kl(l){let e,t,n,a,r,o,f,m,u,p,d,_,v;return{c(){e=c("div"),t=c("div"),t.textContent="name",n=b(),a=c("div"),r=c("input"),o=b(),f=c("div"),m=c("div"),m.textContent="symbol",u=b(),p=c("div"),d=c("input"),s(t,"class","name svelte-8zxh9s"),s(r,"type","text"),s(a,"class","val"),s(e,"class","item svelte-8zxh9s"),s(m,"class","name svelte-8zxh9s"),s(d,"type","text"),s(p,"class","val"),s(f,"class","item svelte-8zxh9s")},m(h,y){z(h,e,y),i(e,t),i(e,n),i(e,a),i(a,r),A(r,l[3]),z(h,o,y),z(h,f,y),i(f,m),i(f,u),i(f,p),i(p,d),A(d,l[4]),_||(v=[D(r,"input",l[28]),D(d,"input",l[29])],_=!0)},p(h,y){y[0]&8&&r.value!==h[3]&&A(r,h[3]),y[0]&16&&d.value!==h[4]&&A(d,h[4])},d(h){h&&C(e),h&&C(o),h&&C(f),_=!1,Te(v)}}}function Ul(l){let e,t,n,a;return{c(){e=c("div"),t=c("button"),t.textContent="edit",s(e,"class","bar svelte-8zxh9s")},m(r,o){z(r,e,o),i(e,t),n||(a=D(t,"click",function(){Ge(l[21].edit)&&l[21].edit.apply(this,arguments)}),n=!0)},p(r,o){l=r},d(r){r&&C(e),n=!1,a()}}}function ql(l){let e;function t(r,o){return r[21].transacting?jl:Gl}let n=t(l),a=n(l);return{c(){a.c(),e=Ke()},m(r,o){a.m(r,o),z(r,e,o)},p(r,o){n===(n=t(r))&&a?a.p(r,o):(a.d(1),a=n(r),a&&(a.c(),a.m(e.parentNode,e)))},d(r){a.d(r),r&&C(e)}}}function Gl(l){let e,t,n,a,r,o;return{c(){e=c("div"),t=c("button"),t.textContent="save",n=b(),a=c("button"),a.textContent="cancel",s(e,"class","bar svelte-8zxh9s")},m(f,m){z(f,e,m),i(e,t),i(e,n),i(e,a),r||(o=[D(t,"click",function(){Ge(l[21].save)&&l[21].save.apply(this,arguments)}),D(a,"click",function(){Ge(l[21].cancel)&&l[21].cancel.apply(this,arguments)})],r=!0)},p(f,m){l=f},d(f){f&&C(e),r=!1,Te(o)}}}function jl(l){let e;return{c(){e=c("div"),e.innerHTML='<i class="fa-solid fa-circle-notch fa-spin"></i><br/>saving to the blockchain...',s(e,"class","loading")},m(t,n){z(t,e,n)},p:he,d(t){t&&C(e)}}}function Jl(l){let e,t=l[41].text+"",n;return{c(){e=c("div"),n=K(t)},m(a,r){z(a,e,r),i(e,n)},p(a,r){r[0]&32&&t!==(t=a[41].text+"")&&oe(n,t)},d(a){a&&C(e)}}}function Vl(l){let e,t=l[41].text+"",n,a,r;return{c(){e=c("a"),n=K(t),s(e,"target","_blank"),s(e,"class",a="val "+(l[41].className?l[41].className:"")+" svelte-8zxh9s"),s(e,"href",r=l[41].link)},m(o,f){z(o,e,f),i(e,n)},p(o,f){f[0]&32&&t!==(t=o[41].text+"")&&oe(n,t),f[0]&32&&a!==(a="val "+(o[41].className?o[41].className:"")+" svelte-8zxh9s")&&s(e,"class",a),f[0]&32&&r!==(r=o[41].link)&&s(e,"href",r)},d(o){o&&C(e)}}}function Ql(l){let e,t,n;function a(u,p){return u[41].key==="permanent"?Yl:Xl}let r=a(l),o=r(l),f=l[41].key==="placeholder"&&Ot(l),m=l[41].key==="base"&&Rt(l);return{c(){o.c(),e=b(),f&&f.c(),t=b(),m&&m.c(),n=Ke()},m(u,p){o.m(u,p),z(u,e,p),f&&f.m(u,p),z(u,t,p),m&&m.m(u,p),z(u,n,p)},p(u,p){r===(r=a(u))&&o?o.p(u,p):(o.d(1),o=r(u),o&&(o.c(),o.m(e.parentNode,e))),u[41].key==="placeholder"?f?f.p(u,p):(f=Ot(u),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null),u[41].key==="base"?m?m.p(u,p):(m=Rt(u),m.c(),m.m(n.parentNode,n)):m&&(m.d(1),m=null)},d(u){o.d(u),u&&C(e),f&&f.d(u),u&&C(t),m&&m.d(u),u&&C(n)}}}function Xl(l){let e,t,n;function a(){l[31].call(e,l[41])}return{c(){e=c("input"),s(e,"type","text"),s(e,"class","val")},m(r,o){z(r,e,o),A(e,l[0].raw[l[41].key]),t||(n=D(e,"input",a),t=!0)},p(r,o){l=r,o[0]&33&&e.value!==l[0].raw[l[41].key]&&A(e,l[0].raw[l[41].key])},d(r){r&&C(e),t=!1,n()}}}function Yl(l){let e,t,n,a=l[0].raw[l[41].key]+"",r,o,f;function m(){l[30].call(e,l[41])}return{c(){e=c("input"),t=b(),n=c("span"),r=K(a),s(e,"name","permanent"),s(e,"type","checkbox")},m(u,p){z(u,e,p),e.checked=l[0].raw[l[41].key],z(u,t,p),z(u,n,p),i(n,r),o||(f=D(e,"change",m),o=!0)},p(u,p){l=u,p[0]&33&&(e.checked=l[0].raw[l[41].key]),p[0]&33&&a!==(a=l[0].raw[l[41].key]+"")&&oe(r,a)},d(u){u&&C(e),u&&C(t),u&&C(n),o=!1,f()}}}function Ot(l){let e;function t(r,o){return r[6]?xl:Zl}let n=t(l),a=n(l);return{c(){a.c(),e=Ke()},m(r,o){a.m(r,o),z(r,e,o)},p(r,o){n===(n=t(r))&&a?a.p(r,o):(a.d(1),a=n(r),a&&(a.c(),a.m(e.parentNode,e)))},d(r){a.d(r),r&&C(e)}}}function Zl(l){let e,t,n;return{c(){e=c("input"),s(e,"type","file"),s(e,"accept","image/*")},m(a,r){z(a,e,r),t||(n=[D(e,"change",l[32]),D(e,"change",l[25])],t=!0)},p:he,d(a){a&&C(e),t=!1,Te(n)}}}function xl(l){let e;return{c(){e=c("div"),e.innerHTML='<i class="fa-solid fa-circle-notch fa-spin"></i><br/>uploading...',s(e,"class","loading")},m(t,n){z(t,e,n)},p:he,d(t){t&&C(e)}}}function Rt(l){let e,t=l[2],n=[];for(let a=0;a<t.length;a+=1)n[a]=Ft(Ht(l,t,a));return{c(){e=c("div");for(let a=0;a<n.length;a+=1)n[a].c();s(e,"class","folders svelte-8zxh9s")},m(a,r){z(a,e,r);for(let o=0;o<n.length;o+=1)n[o].m(e,null)},p(a,r){if(r[0]&67108868){t=a[2];let o;for(o=0;o<t.length;o+=1){const f=Ht(a,t,o);n[o]?n[o].p(f,r):(n[o]=Ft(f),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(a){a&&C(e),ct(n,a)}}}function Ft(l){let e,t,n,a,r,o=l[44].name+"",f,m,u,p=l[44].cid+"",d,_,v,h;function y(){return l[33](l[44])}return{c(){e=c("div"),t=c("button"),t.textContent="select",n=b(),a=c("div"),r=c("h3"),f=K(o),m=b(),u=c("div"),d=K(p),_=b(),s(r,"class","svelte-8zxh9s"),s(u,"class","svelte-8zxh9s"),s(a,"class","folder svelte-8zxh9s"),s(e,"class","item svelte-8zxh9s")},m(w,k){z(w,e,k),i(e,t),i(e,n),i(e,a),i(a,r),i(r,f),i(a,m),i(a,u),i(u,d),i(e,_),v||(h=D(t,"click",y),v=!0)},p(w,k){l=w,k[0]&4&&o!==(o=l[44].name+"")&&oe(f,o),k[0]&4&&p!==(p=l[44].cid+"")&&oe(d,p)},d(w){w&&C(e),v=!1,h()}}}function Dt(l){let e,t,n;return{c(){e=c("div"),t=c("img"),s(t,"class","thumb"),yt(t.src,n=l[10])||s(t,"src",n),s(e,"class","file-holder")},m(a,r){z(a,e,r),i(e,t)},p(a,r){r[0]&1024&&!yt(t.src,n=a[10])&&s(t,"src",n)},d(a){a&&C(e)}}}function Et(l){let e,t,n=l[41].name+"",a,r,o,f;function m(_,v){return _[41].editable?Ql:_[41].link?Vl:Jl}let u=m(l),p=u(l),d=l[41].key==="placeholder"&&Dt(l);return{c(){e=c("div"),t=c("div"),a=K(n),r=b(),o=c("div"),p.c(),f=b(),d&&d.c(),s(t,"class","name svelte-8zxh9s"),s(o,"class","val"),s(e,"class","item svelte-8zxh9s")},m(_,v){z(_,e,v),i(e,t),i(t,a),i(e,r),i(e,o),p.m(o,null),i(o,f),d&&d.m(o,null)},p(_,v){v[0]&32&&n!==(n=_[41].name+"")&&oe(a,n),u===(u=m(_))&&p?p.p(_,v):(p.d(1),p=u(_),p&&(p.c(),p.m(o,f))),_[41].key==="placeholder"?d?d.p(_,v):(d=Dt(_),d.c(),d.m(o,null)):d&&(d.d(1),d=null)},d(_){_&&C(e),p.d(),d&&d.d()}}}function $l(l){let e,t,n,a;return{c(){e=c("div"),t=c("button"),t.textContent="edit",s(e,"class","bar svelte-8zxh9s")},m(r,o){z(r,e,o),i(e,t),n||(a=D(t,"click",function(){Ge(l[20].edit)&&l[20].edit.apply(this,arguments)}),n=!0)},p(r,o){l=r},d(r){r&&C(e),n=!1,a()}}}function ei(l){let e;function t(r,o){return r[20].transacting?li:ti}let n=t(l),a=n(l);return{c(){a.c(),e=Ke()},m(r,o){a.m(r,o),z(r,e,o)},p(r,o){n===(n=t(r))&&a?a.p(r,o):(a.d(1),a=n(r),a&&(a.c(),a.m(e.parentNode,e)))},d(r){a.d(r),r&&C(e)}}}function ti(l){let e,t,n,a,r,o;return{c(){e=c("div"),t=c("button"),t.textContent="save",n=b(),a=c("button"),a.textContent="cancel",s(e,"class","bar svelte-8zxh9s")},m(f,m){z(f,e,m),i(e,t),i(e,n),i(e,a),r||(o=[D(t,"click",function(){Ge(l[20].save)&&l[20].save.apply(this,arguments)}),D(a,"click",function(){Ge(l[20].cancel)&&l[20].cancel.apply(this,arguments)})],r=!0)},p(f,m){l=f},d(f){f&&C(e),r=!1,Te(o)}}}function li(l){let e;return{c(){e=c("div"),e.innerHTML='<i class="fa-solid fa-circle-notch fa-spin"></i><br/>saving to the blockchain...',s(e,"class","loading")},m(t,n){z(t,e,n)},p:he,d(t){t&&C(e)}}}function Wt(l){let e,t,n;return t=new El({props:{role:l[15],netPrefix:l[9],invites:l[12],contract:l[14],web3:l[22]}}),t.$on("refresh",l[23]),t.$on("error",l[24]),{c(){e=c("div"),Fe(t.$$.fragment),s(e,"class","info svelte-8zxh9s")},m(a,r){z(a,e,r),De(t,e,null),n=!0},p(a,r){const o={};r[0]&32768&&(o.role=a[15]),r[0]&512&&(o.netPrefix=a[9]),r[0]&4096&&(o.invites=a[12]),r[0]&16384&&(o.contract=a[14]),t.$set(o)},i(a){n||(pe(t.$$.fragment,a),n=!0)},o(a){ye(t.$$.fragment,a),n=!1},d(a){a&&C(e),Ee(t)}}}function ii(l){let e,t,n,a,r,o,f,m,u;a=new qt({props:{contracts:"selected",network:l[18],account:l[19]}});const p=[Bl,Wl],d=[];function _(v,h){return v[7]?0:1}return o=_(l),f=d[o]=p[o](l),{c(){e=c("div"),t=K(l[13]),n=b(),Fe(a.$$.fragment),r=b(),f.c(),m=Ke(),s(e,"class","error")},m(v,h){z(v,e,h),i(e,t),z(v,n,h),De(a,v,h),z(v,r,h),d[o].m(v,h),z(v,m,h),u=!0},p(v,h){(!u||h[0]&8192)&&oe(t,v[13]);const y={};h[0]&262144&&(y.network=v[18]),h[0]&524288&&(y.account=v[19]),a.$set(y);let w=o;o=_(v),o===w?d[o].p(v,h):(Xe(),ye(d[w],1,1,()=>{d[w]=null}),Ye(),f=d[o],f?f.p(v,h):(f=d[o]=p[o](v),f.c()),pe(f,1),f.m(m.parentNode,m))},i(v){u||(pe(a.$$.fragment,v),pe(f),u=!0)},o(v){ye(a.$$.fragment,v),ye(f),u=!1},d(v){v&&C(e),v&&C(n),Ee(a,v),v&&C(r),d[o].d(v),v&&C(m)}}}function ni(l,e,t){let n=[];const a=new F0;let r="",o="",f=[],m=!1,u,p,d="",_="",v={},h=[],y,w="",k,N,E,L,I,F,S=new Web3(window.ethereum),P,J,V;const M=async()=>{if(t(7,u=!0),location.hash.length>0){let $=location.hash.slice(1).split(":");t(14,k=$[0]),$.length>1&&t(27,L=$[1]),$.length>2&&t(16,I=$[2])}else{t(13,w="[ERROR] no contract address specified");return}await a.init({web3:S,contract:k}),t(17,F=JSON.stringify(a.abi,null,2)),N=await a.api.owner().call(),t(19,V=a.account),t(15,E=N.toLowerCase()===a.account.toLowerCase()?"admin":"public"),t(3,r=await a.api.name().call()),t(4,o=await a.api.symbol().call()),t(0,v=await a.config()),t(8,p=await S.eth.getChainId()),t(12,y=await a.invites()),console.log("invites",y),t(9,d=p.toString()==="4"?"rinkeby.":""),t(18,J=p.toString()==="4"?"rinkeby":"mainnet"),console.log("config",v),t(5,f=[{name:"Default vending machine",link:"/mint/#"+k,text:"Open vending machine",className:"btn display"},{name:"Build your own custom vending machine website",link:"https://skinnerbox.factoria.app#"+k,text:"Open skinnerbox factory",className:"btn display"},{name:"etherscan",link:`https://${d}etherscan.io/address/${k}`,text:`https://${d}etherscan.io/address/${k}`},{name:"placeholder uri",key:"placeholder",link:v.converted.placeholder,text:v.raw.placeholder,editable:!1},{name:"base uri",key:"base",link:v.converted.base,text:v.raw.base,editable:!1},{name:"total supply",key:"supply",text:v.raw.supply,editable:!1},{name:"permanent",key:"permanent",text:v.raw.permanent.toString(),editable:!1}]),t(7,u=!1)},Y=async()=>{await M()},se=async T=>{T.detail.error?t(13,w=T.detail.error):t(13,w="")},W={editable:!1,transacting:!1,edit:async()=>{t(20,W.editable=!0,W),t(5,f=f.map(T=>(typeof T.editable!="undefined"&&(T.editable=!0),T)))},save:async()=>{if(v.raw.base.length===0||/ipfs:\/\/[^/]+\//.test(v.raw.base))try{t(20,W.transacting=!0,W);let $=await a.api.setConfig(v.raw).send();await M(),t(20,W.editable=!1,W),t(20,W.transacting=!1,W)}catch($){t(13,w=$.message),t(20,W.transacting=!1,W)}else t(13,w="The base URI must take the following format: 'ipfs://<cid>/', or an empty string")},cancel:()=>{t(5,f=f.map(T=>(typeof T.editable!="undefined"&&(T.editable=!1),T))),t(20,W.editable=!1,W)}},G={editable:!1,transacting:!1,edit:async()=>{t(21,G.editable=!0,G)},save:async()=>{t(21,G.transacting=!0,G),await a.api.setNS(r,o).send(),t(3,r=await a.api.name().call()),t(4,o=await a.api.symbol().call()),t(21,G.editable=!1,G),t(21,G.transacting=!1,G)},cancel:()=>{t(21,G.editable=!1,G)}},Z=async()=>{if(h.length>0){t(6,m=!0);let T=await Qt(h[0]);t(0,v.raw.placeholder="ipfs://"+T,v),t(6,m=!1)}},x=T=>{t(0,v.raw.base=`ipfs://${T.trim()}/`,v)};(async()=>{Jt("metadata").then(T=>{t(2,n=T)})})(),M().then(()=>{}).catch(T=>{console.log("ERROR",T),t(13,w=T.message)});function ce(){r=this.value,t(3,r)}function U(){o=this.value,t(4,o)}function ie(T){v.raw[T.key]=this.checked,t(0,v)}function q(T){v.raw[T.key]=this.value,t(0,v)}function me(){h=this.files,t(11,h)}const re=T=>{x(T.cid)};function ve(T){Ut[T?"unshift":"push"](()=>{P=T,t(1,P)})}function Q(){F=this.value,t(17,F)}return l.$$.update=()=>{l.$$.dirty[0]&1&&v&&v.raw&&(Object.keys(v.raw).forEach(T=>{typeof v.raw[T]=="string"&&t(0,v.raw[T]=v.raw[T].trim(),v)}),fetch("https://ipfs.io/ipfs/"+v.raw.placeholder.replace("ipfs://","")).then(T=>T.json()).then(T=>{T.image.startsWith("ipfs://")?t(10,_="https://ipfs.io/ipfs/"+T.image.replace("ipfs://","")):T.image.startsWith("http")&&t(10,_=T.image)}),Object.keys(v.raw)),l.$$.dirty[0]&134217730&&L==="mint"&&(console.log("InviteAnchor",P),P&&P.scrollIntoView({behavior:"smooth"}))},[v,P,n,r,o,f,m,u,p,d,_,h,y,w,k,E,I,F,J,V,W,G,S,Y,se,Z,x,L,ce,U,ie,q,me,re,ve,Q]}class si extends je{constructor(e){super(),Je(this,e,ni,ii,Ve,{},null,[-1,-1])}}new si({target:document.getElementById("dashboard")});
