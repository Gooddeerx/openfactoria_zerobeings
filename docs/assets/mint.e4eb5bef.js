import{S as te,i as le,s as se,e as m,t as H,a as T,d as f,u as ie,f as L,g as n,h as D,l as F,k as U,C as $,j as Q,D as ne,o as ae,B as x,p as ee,r as q,q as P,y as oe,c as re,m as ce,n as fe,v as A,z as ue}from"./index.534f2e7f.js";import{h as G,M as me}from"./MintTable.a63c07ed.js";function J(l,e,t){const s=l.slice();return s[28]=e[t],s}function V(l){let e,t,s,o,a,c,_,i,d,g,h,b,j,M,r;return{c(){e=m("div"),t=m("h2"),s=H(l[9]),o=H(" ("),a=H(l[10]),c=H(")"),_=T(),i=m("a"),d=m("img"),h=T(),b=H(l[3]),M=T(),r=m("div"),r.textContent="Mint your NFT from an invite list below.",f(t,"class","svelte-j9jkll"),ie(d.src,g="/etherscan.png")||f(d,"src",g),f(d,"class","svelte-j9jkll"),f(i,"target","_blank"),f(i,"href",j="https://"+l[12]+"etherscan.io/address/"+l[3]+"#code"),f(i,"class","svelte-j9jkll"),f(r,"class","annotation svelte-j9jkll"),f(e,"class","ns svelte-j9jkll")},m(u,w){L(u,e,w),n(e,t),n(t,s),n(t,o),n(t,a),n(t,c),n(e,_),n(e,i),n(i,d),n(i,h),n(i,b),n(e,M),n(e,r)},p(u,w){w&512&&D(s,u[9]),w&1024&&D(a,u[10]),w&8&&D(b,u[3]),w&4104&&j!==(j="https://"+u[12]+"etherscan.io/address/"+u[3]+"#code")&&f(i,"href",j)},d(u){u&&F(e)}}}function de(l){let e;return{c(){e=m("div"),e.textContent="you are not on any invite list",f(e,"class","empty")},m(t,s){L(t,e,s)},p:q,i:q,o:q,d(t){t&&F(e)}}}function ve(l){let e,t,s,o=l[0],a=[];for(let c=0;c<o.length;c+=1)a[c]=X(J(l,o,c));return{c(){e=m("table"),t=m("tr"),t.innerHTML=`<th class="svelte-j9jkll">name</th> 
          <th class="svelte-j9jkll">price</th> 
          <th class="invite-limit svelte-j9jkll">limit</th> 
          <th class="invite-mint svelte-j9jkll">mint</th>`,s=T();for(let c=0;c<a.length;c+=1)a[c].c();f(e,"class","svelte-j9jkll")},m(c,_){L(c,e,_),n(e,t),n(e,s);for(let i=0;i<a.length;i+=1)a[i].m(e,null)},p(c,_){if(_&16385){o=c[0];let i;for(i=0;i<o.length;i+=1){const d=J(c,o,i);a[i]?a[i].p(d,_):(a[i]=X(d),a[i].c(),a[i].m(e,null))}for(;i<a.length;i+=1)a[i].d(1);a.length=o.length}},i:q,o:q,d(c){c&&F(e),oe(a,c)}}}function _e(l){let e;return{c(){e=m("div"),e.innerHTML='<i class="fa-solid fa-circle-notch fa-spin"></i><br/>loading invites...',f(e,"class","loading svelte-j9jkll")},m(t,s){L(t,e,s)},p:q,i:q,o:q,d(t){t&&F(e)}}}function he(l){let e,t,s,o,a,c,_=(l[4].name?l[4].name:l[4].key)+"",i,d,g,h,b,j,M,r,u,w,E,S,N,C,y,R,z,B,K,W;function Z(v,I){return v[6]?pe:ke}let O=Z(l),p=O(l),k=l[8]&&Y(l);return{c(){e=m("div"),t=m("div"),s=m("div"),o=m("div"),o.textContent="invite",a=T(),c=m("div"),i=H(_),d=T(),g=m("div"),h=T(),b=m("button"),b.innerHTML='<i class="fa-solid fa-circle-xmark"></i>',j=T(),M=m("h2"),r=H(l[11]),u=H(" ETH"),w=T(),E=m("div"),S=m("div"),S.textContent="count",N=T(),C=m("div"),y=m("input"),R=T(),p.c(),z=T(),k&&k.c(),f(o,"class","faded svelte-j9jkll"),f(s,"class","invitename svelte-j9jkll"),f(g,"class","flexible svelte-j9jkll"),f(b,"class","svelte-j9jkll"),f(t,"class","header svelte-j9jkll"),f(M,"class","svelte-j9jkll"),f(S,"class","name svelte-j9jkll"),f(y,"type","number"),f(y,"placeholder","mint count"),f(y,"class","svelte-j9jkll"),f(C,"class","value svelte-j9jkll"),f(E,"class","selector svelte-j9jkll"),f(e,"class","showauth info svelte-j9jkll")},m(v,I){L(v,e,I),n(e,t),n(t,s),n(s,o),n(s,a),n(s,c),n(c,i),n(t,d),n(t,g),n(t,h),n(t,b),n(e,j),n(e,M),n(M,r),n(M,u),n(e,w),n(e,E),n(E,S),n(E,N),n(E,C),n(C,y),A(y,l[1]),n(e,R),p.m(e,null),n(e,z),k&&k.m(e,null),B=!0,K||(W=[P(b,"click",l[17]),P(y,"input",l[18]),P(y,"input",l[19])],K=!0)},p(v,I){(!B||I&16)&&_!==(_=(v[4].name?v[4].name:v[4].key)+"")&&D(i,_),(!B||I&2048)&&D(r,v[11]),I&2&&ee(y.value)!==v[1]&&A(y,v[1]),O===(O=Z(v))&&p?p.p(v,I):(p.d(1),p=O(v),p&&(p.c(),p.m(e,z))),v[8]?k?(k.p(v,I),I&256&&Q(k,1)):(k=Y(v),k.c(),Q(k,1),k.m(e,null)):k&&(x(),U(k,1,1,()=>{k=null}),$())},i(v){B||(Q(k),B=!0)},o(v){U(k),B=!1},d(v){v&&F(e),p.d(),k&&k.d(),K=!1,ue(W)}}}function X(l){let e,t,s=(l[28].name?l[28].name:l[28].key)+"",o,a,c,_=l[28].price+"",i,d,g,h,b=l[28].limit+"",j,M,r,u,w,E,S;function N(){return l[21](l[28])}return{c(){e=m("tr"),t=m("td"),o=H(s),a=T(),c=m("td"),i=H(_),d=H(" ETH"),g=T(),h=m("td"),j=H(b),M=T(),r=m("td"),u=m("button"),u.textContent="mint",w=T(),f(t,"class","svelte-j9jkll"),f(c,"class","svelte-j9jkll"),f(h,"class","invite-limit svelte-j9jkll"),f(u,"class","display svelte-j9jkll"),f(r,"class","invite-mint svelte-j9jkll")},m(C,y){L(C,e,y),n(e,t),n(t,o),n(e,a),n(e,c),n(c,i),n(c,d),n(e,g),n(e,h),n(h,j),n(e,M),n(e,r),n(r,u),n(e,w),E||(S=P(u,"click",N),E=!0)},p(C,y){l=C,y&1&&s!==(s=(l[28].name?l[28].name:l[28].key)+"")&&D(o,s),y&1&&_!==(_=l[28].price+"")&&D(i,_),y&1&&b!==(b=l[28].limit+"")&&D(j,b)},d(C){C&&F(e),E=!1,S()}}}function ke(l){let e,t,s;return{c(){e=m("button"),e.textContent="mint",f(e,"id","mint-button"),f(e,"class","display svelte-j9jkll")},m(o,a){L(o,e,a),t||(s=P(e,"click",l[20]),t=!0)},p:q,d(o){o&&F(e),t=!1,s()}}}function pe(l){let e;return{c(){e=m("div"),e.innerHTML='<i class="fa-solid fa-circle-notch fa-spin"></i><br/>minting NFTs...',f(e,"class","loading svelte-j9jkll")},m(t,s){L(t,e,s)},p:q,d(t){t&&F(e)}}}function Y(l){let e,t;return e=new me({props:{tx:l[8],web3:l[13],contract:l[3]}}),{c(){re(e.$$.fragment)},m(s,o){ce(e,s,o),t=!0},p(s,o){const a={};o&256&&(a.tx=s[8]),o&8&&(a.contract=s[3]),e.$set(a)},i(s){t||(Q(e.$$.fragment,s),t=!0)},o(s){U(e.$$.fragment,s),t=!1},d(s){fe(e,s)}}}function je(l){let e,t,s,o,a,c,_,i,d,g,h=l[9]&&V(l);const b=[he,_e,ve,de],j=[];function M(r,u){return r[5]?0:r[7]?1:r[0]&&r[0].length>0?2:3}return i=M(l),d=j[i]=b[i](l),{c(){e=m("div"),t=H(l[2]),s=T(),o=m("div"),a=m("nav"),a.innerHTML=`<h1 class="svelte-j9jkll"><a href="/" class="svelte-j9jkll">factoria</a></h1> 
  <div>decentralized NFT vending machine maker</div> 
  <div class="buttons svelte-j9jkll"><a href="https://factoria.app/docs" class="svelte-j9jkll"><i class="fa-solid fa-circle-question"></i></a> 
    <a href="https://github.com/factoria-org/openfactoria" class="svelte-j9jkll"><i class="fa-brands fa-github"></i></a> 
    <a href="https://twitter.com/skogard" class="svelte-j9jkll"><i class="fa-brands fa-twitter"></i></a> 
    <a href="https://discord.gg/BZtp5F6QQM" class="svelte-j9jkll"><i class="fa-brands fa-discord"></i></a></div>`,c=T(),h&&h.c(),_=T(),d.c(),f(e,"class","error"),f(a,"class","svelte-j9jkll"),f(o,"class","container svelte-j9jkll")},m(r,u){L(r,e,u),n(e,t),L(r,s,u),L(r,o,u),n(o,a),n(o,c),h&&h.m(o,null),n(o,_),j[i].m(o,null),g=!0},p(r,[u]){(!g||u&4)&&D(t,r[2]),r[9]?h?h.p(r,u):(h=V(r),h.c(),h.m(o,_)):h&&(h.d(1),h=null);let w=i;i=M(r),i===w?j[i].p(r,u):(x(),U(j[w],1,1,()=>{j[w]=null}),$(),d=j[i],d?d.p(r,u):(d=j[i]=b[i](r),d.c()),Q(d,1),d.m(o,null))},i(r){g||(Q(d),g=!0)},o(r){U(d),g=!1},d(r){r&&F(e),r&&F(s),r&&F(o),h&&h.d(),j[i].d()}}}function be(l,e,t){ne();let s={},o=[];const a=new F0;let c=1,_="",i,d,g,h,b,j,M,r,u=0,w,E,S,N,C=new Web3(window.ethereum);const y=async p=>{t(4,g=p),t(5,h=!0),location.hash="#"+i+":"+g.key,await R()},R=async()=>{let p=g;console.log("*",p),b={key:p.key,proof:a._invites[p.key].proof},u=""+a._invites[p.key].condition.raw.price*c,t(11,S=u/10**18);try{t(2,_="");let k=await a.api.mint(b,c).estimate({value:u});console.log("estimate",k)}catch(k){console.log("error",k.message),t(2,_=G(k.message))}},z=async()=>{try{t(6,j=!0),t(2,_="");let p=g;b={key:p.key,proof:a._invites[p.key].proof},t(8,r=await a.api.mint(b,c).send({value:u}))}catch(p){t(2,_=G(p.message))}t(6,j=!1)},B=()=>{location.hash="#"+i,t(5,h=!1)};ae(async()=>{t(7,M=!0);try{if(location.hash.length>0){let v=location.hash.slice(1).split(":");t(3,i=v[0]),v.length>1&&(d=v[1])}else{t(2,_="[ERROR] no contract address specified");return}await a.init({web3:C,contract:i});let p=await C.eth.getChainId();t(12,N=p.toString()==="4"?"rinkeby.":""),t(9,w=await a.api.name().call()),t(10,E=await a.api.symbol().call()),s=await a.myInvites(),s&&s[d]&&await y(s[d]),t(0,o=[]);for(let k in s){let v=s[k].condition,I=new Date(v.converted.start);v.converted.limit>0&&o.push({name:s[k].name,key:k,cid:s[k].cid,limit:`${v.converted.limit}`,price:`${v.converted.eth}`,start:`${I.toDateString()} ${I.toLocaleTimeString()}`,startUnix:v.raw.start})}}catch(p){t(2,_=p.message)}t(7,M=!1)});function K(){c=ee(this.value),t(1,c)}return[o,c,_,i,g,h,j,M,r,w,E,S,N,C,y,R,z,B,K,()=>{R()},()=>{z()},p=>{y(p)}]}class ge extends te{constructor(e){super(),le(this,e,be,je,se,{})}}new ge({target:document.getElementById("mint")});
